if (self.CavalryLogger) { CavalryLogger.start_js(["cbeMR"]); }

__d("MActorListDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationReactDispatcher"))({strict:!0})}),null);
__d("XActorListController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/actor_list/",{actor_list_id:{type:"Int",required:!0},payload_type:{type:"Enum",required:!0,enumType:1}})}),null);
__d("MActorListStore",["EventEmitter","MActorListDispatcher","MRequest","XActorListController"],(function(a,b,c,d,e,f){__p&&__p();var g={},h={};a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c;c=a.call(this)||this;c.dispatchToken=b("MActorListDispatcher").register(function(a){switch(a.type){case"request_composer_actor_list":case"request_ufi_actor_list":c.$MActorListStore1(a.data.id,a.type);break;case"composer_actor_list":case"ufi_actor_list":Object.assign(g,a.data.actors);a.data.actors&&(h[a.data.id]=Object.keys(a.data.actors));c.emit("change");break}});return c}var d=c.prototype;d.getDispatchToken=function(){return this.dispatchToken};d.$MActorListStore1=function(a,c){a=b("XActorListController").getURIBuilder().setInt("actor_list_id",a).setEnum("payload_type",c).getURI();new(b("MRequest"))(a).send()};d.getActorData=function(a){a=g[a];return a?a:null};d.getActorList=function(a){a=h[a];return a?a.slice():null};return c}(b("EventEmitter"));e.exports=new a()}),null);
__d("MActorSelectorFlyout.react",["MFlyout","MLayerDestroyOnHide","MLayerHideOnBlur","ReactDOM","ReactLayer"],(function(a,b,c,d,e,f){__p&&__p();a=b("ReactLayer").createClass({createLayer:function(a){var c=this.props,d=c.shown,e=c.className,f=c.contextRef,g=c.isNux;c=babelHelpers.objectWithoutPropertiesLoose(c,["shown","className","contextRef","isNux"]);e=e?e.split(" "):[];e.push("accelerate");g=g?[b("MLayerDestroyOnHide")]:[b("MLayerDestroyOnHide"),b("MLayerHideOnBlur")];c=new(b("MFlyout"))(babelHelpers["extends"]({},c,{addedBehaviors:g,classNames:e,context:b("ReactDOM").findDOMNode(f()),margin:"none",nubalign:"center",offsetY:0,width:"100%"}),a);c.conditionShow(d);return c},receiveProps:function(a,b){this.updateBehaviors(b.behaviors,a.behaviors),this.layer&&this.layer.conditionShow(a.shown)}});e.exports=a}),null);
__d("MActorSelector.react",["cx","fbt","invariant","ix","CurrentUser","Image.react","Layout.react","MActorListDispatcher","MActorListStore","MActorSelectorFlyout.react","MXUISpinner.react","React","ReactLayeredComponentMixin_DEPRECATED","ShimButton.react","Stratcom","SubscriptionsHandler","fbglyph"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=b("Layout.react").Column,l=b("Layout.react").FillColumn;a=b("React").PropTypes;var m=20,n=32;c=b("React").createClass({displayName:"MActorSelector",mixins:[b("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{actorListID:a.string.isRequired,actorListRequestPayloadType:a.string.isRequired,coverEnabled:a.bool.isRequired,flyoutTitle:a.node,nuxBody:a.node,onChange:a.func.isRequired,onCompleteNux:a.func,selectedActorID:a.string.isRequired,selectedActorProfilePicURI:a.string.isRequired,showLoadingIndicator:a.bool.isRequired,showNux:a.bool.isRequired,showFlyoutOnRender:a.bool},getInitialState:function(){b("MActorListDispatcher").explicitlyRegisterStore(b("MActorListStore"));var a=b("MActorListStore").getActorList(this.props.actorListID);return{actorListLoaded:a!=null,hasBeenClicked:!1,showFlyout:!!this.props.showFlyoutOnRender}},render:function(){__p&&__p();var a=this,c=null,d=null;this._isCovered()?d=j("95410"):(c=b("React").createElement(b("Image.react"),{className:"_jvo _3-99",src:j("142926")}),d=this.props.selectedActorProfilePicURI);var e=null;this.props.showLoadingIndicator&&(e=b("React").createElement(b("MXUISpinner.react"),{className:"_1-gi"}));return b("React").createElement("div",{className:"_2g0e","data-sigil":"touchable",onClick:function(){if(a._ignoreNextClick){a._ignoreNextClick=!1;return}a.props.showNux&&(a.props.onCompleteNux&&a.props.onCompleteNux());a.setState({hasBeenClicked:!0,showFlyout:!a.state.showFlyout})},onMouseDown:function(){a._ignoreNextClick=!1},onTouchStart:function(){a._ignoreNextClick=!1},role:"presentation"},e,b("React").createElement(b("Image.react"),{className:"_1e_c",height:m,ref:"profilePic",src:d,width:m}),c)},renderLayers:function(){__p&&__p();var a=this;if(!this.state.showFlyout){if(this.props.showNux){var c;return(c=b("React")).createElement(b("MActorSelectorFlyout.react"),{isNux:!0,contextRef:function(){return a.refs.profilePic},position:"above",shown:this.props.showNux},c.createElement(b("ShimButton.react"),{className:"_3nv2","data-sigil":"touchable",onClick:function(){a.props.onCompleteNux&&a.props.onCompleteNux()}},c.createElement(b("Image.react"),{src:j("143543")})),c.createElement("div",{className:"_2ph_"},this.props.nuxBody,c.createElement("div",{className:"_2pie"},c.createElement("a",{href:this.props.settingsURI},h._("Post attribution settings")))))}return null}c=null;if(this.state.actorListLoaded){var d=b("MActorListStore").getActorList(this.props.actorListID);Array.isArray(d)||i(0,4865);var e=[];d.map(function(c){var d=b("MActorListStore").getActorData(c);d||i(0,1770);var f=null;c===a.props.selectedActorID&&(f=b("React").createElement(k,null,b("React").createElement("div",{className:"_2pi3"},b("React").createElement(b("Image.react"),{src:j("138598")}))));e.push(b("React").createElement("li",{className:"_ru0","data-sigil":"touchable",key:c,onClick:function(){c!==a.props.selectedActorID&&a.props.onChange(c)}},b("React").createElement(b("Layout.react"),null,b("React").createElement(k,null,b("React").createElement(b("Image.react"),{className:"_1e_c",height:n,src:d.profilePicURI,width:n})),b("React").createElement(l,null,b("React").createElement("div",{className:"_3-9a _52jh"},d.name)),f)))});d=null;this.props.flyoutTitle&&(d=b("React").createElement("li",{className:"_ru0 _52j9",key:"title"},this.props.flyoutTitle));c=b("React").createElement("ul",null,d,e)}else c=b("React").createElement("div",{className:"_ru1"},b("React").createElement(b("MXUISpinner.react"),{size:"large"}));return b("React").createElement(b("MActorSelectorFlyout.react"),{contextRef:function(){return a.refs.profilePic},key:"mActorSelectorFlyout_"+this.props.actorListID+"_"+(this.state.actorListLoaded?this.props.selectedActorID:"loading"),onToggle:function(b){b||(a._ignoreNextClick=!0,a.setState({showFlyout:b}))},position:"below",shown:!0,logShown:this.state.actorListLoaded?"actor-selector-popup":null},c)},_subscriptionsHandler:null,_ignoreNextClick:!1,componentDidMount:function(){var a=this;this._subscriptionsHandler=new(b("SubscriptionsHandler"))();this._subscriptionsHandler.addSubscriptions(b("MActorListStore").addListener("change",function(){var c=b("MActorListStore").getActorList(a.props.actorListID);c&&!a.state.actorListLoaded&&a.setState({actorListLoaded:!0})}),b("Stratcom").listen("MActorSelector-close",null,function(){a.setState({showFlyout:!1})}))},componentDidUpdate:function(a){if(this.state.showFlyout){var c=b("MActorListStore").getActorList(this.props.actorListID);c===null&&b("MActorListDispatcher").dispatch({data:{id:this.props.actorListID},type:this.props.actorListRequestPayloadType})}this.props.selectedActorProfilePicURI!==a.selectedActorProfilePicURI&&this.setState({showFlyout:!1})},componentWillUnmount:function(){this._subscriptionsHandler&&(this._subscriptionsHandler.release(),this._subscriptionsHandler=null)},_isCovered:function(){return this.props.coverEnabled&&this.props.selectedActorID===b("CurrentUser").getID()&&!this.state.hasBeenClicked}});e.exports=c}),null);
__d("XActorSelectorNuxSeenWriteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/actor_selector/nux/mark_seen/",{nux_type:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XActorSelectorNuxStatusController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/actor_selector/nux/status/",{actor_selector_id:{type:"String",required:!0},payload_type:{type:"Enum",required:!0,enumType:1}})}),null);
__d("MActorSelectorNuxStore",["invariant","EventEmitter","MActorSelectorNuxDispatcher","MRequest","XActorSelectorNuxSeenWriteController","XActorSelectorNuxStatusController"],(function(a,b,c,d,e,f,g){__p&&__p();var h={},i={},j=null,k=!1,l=!1;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c;c=a.call(this)||this;c.dispatchToken=b("MActorSelectorNuxDispatcher").register(function(a){__p&&__p();switch(a.type){case"composer_nux_seen":c.$MActorSelectorNuxStore1(a.type);k=!0;c.emit("change");break;case"ufi_nux_seen":c.$MActorSelectorNuxStore1(a.type);l=!0;c.emit("change");break;case"composer_nux_status":a.data&&(h[a.data.actorSelectorID]=a.data.isEnabled);c.emit("change");break;case"ufi_nux_status":a.data&&(i[a.data.actorSelectorID]=a.data.isEnabled);c.emit("change");break;case"request_composer_nux_status":a.data&&c.$MActorSelectorNuxStore2(a.type,a.data.actorSelectorID);break;case"request_ufi_nux_status":a.data&&(j===null&&(j=a.data.actorSelectorID),c.$MActorSelectorNuxStore2(a.type,a.data.actorSelectorID));break}});return c}var d=c.prototype;d.getDispatchToken=function(){return this.dispatchToken};d.canShowComposerNux=function(a){return k?!1:h[a]||!1};d.canShowUFINux=function(a){if(l)return!1;return a!==j?!1:i[a]||!1};d.getUFIActorSelectorIDToShowNux=function(){return j};d.$MActorSelectorNuxStore1=function(a){var c=null;switch(a){case"composer_nux_seen":c="m_composer_seen_count";break;case"ufi_nux_seen":c="m_ufi_seen_count";break;default:g(0,522)}a=b("XActorSelectorNuxSeenWriteController").getURIBuilder().setEnum("nux_type",c).getURI();new(b("MRequest"))(a).send()};d.$MActorSelectorNuxStore2=function(a,c){c=b("XActorSelectorNuxStatusController").getURIBuilder().setString("actor_selector_id",c).setEnum("payload_type",a).getURI();new(b("MRequest"))(c).send()};return c}(b("EventEmitter"));e.exports=new a()}),null);
__d("XFeedUFICommentHistoryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/ufi/{comment_token}/history/",{comment_token:{type:"String",required:!0},replace_id:{type:"String",required:!0}})}),null);
__d("XFeedUFICommentsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/ufi/",{fs:{type:"Int"},feedback_target:{type:"String",required:!0},focus_composer:{type:"Bool",defaultValue:!1},replace_id:{type:"String",required:!0},share_id:{type:"String"},action_source:{type:"Int"},__tn__:{type:"String"},_ft_:{type:"String"},comment_id:{type:"Int"},reply_comment_id:{type:"Int"}})}),null);
__d("XFeedUFILikesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/ufi/likes/",{feedback_target:{type:"String",required:!0},replace_id:{type:"String",required:!0},link_data:{type:"String"}})}),null);
__d("XFeedUFIReactionsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/ufi/reactions/",{feedback_target:{type:"String",required:!0},replace_id:{type:"String",required:!0},link_data:{type:"String"}})}),null);
__d("MFeedUFI",["cx","ActorURI","BanzaiLogger","CSS","DOM","MJSEnvironment","MLegacyDataStore","MParent","MRequest","MViewport","Stratcom","Vector","XFeedUFICommentHistoryController","XFeedUFICommentsController","XFeedUFILikesController","XFeedUFIReactionsController","$","ge","getActiveElement","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();var h="feed-ufi",i="replies-see-more",j="m-inline-reply-composer",k="m-ufi-no-comments",l="m-ufi-sticker-suggestions",m={COMMENTS:"comments",LIKES:"likes",REACTIONS:"reactions",HISTORY:"history",NONE:""},n="_1vcf",o="_53xw",p="preview_rid",q="comment_id",r,s,t,u,v,w,x,y,z,A=null,B=null,C=null;function D(){C&&(b("CSS").removeClass(C,n),C=null)}function E(a){D(),a&&(b("CSS").addClass(a,n),C=a)}var F=null;function G(){F&&(b("CSS").removeClass(F,o),F=null)}function H(a){G(),a&&(b("CSS").addClass(a,o),F=a)}function a(){if(w)return;x=[b("Stratcom").listen("click",[h,"composer-submit"],ja),b("Stratcom").listen("click","like",ga),b("Stratcom").listen("focus",[h,"textarea"],ea),b("Stratcom").listen("multi-photos-change",null,ka),b("Stratcom").listen("MCommentEdit:showcomposer",null,la),b("Stratcom").listen("MUFICommentReplyLink:show-inline-composer",null,ma),b("Stratcom").listen("MStickerSelector:show-sticker-selector",null,na),b("Stratcom").listen("m:page:unload",null,M)];b("MJSEnvironment").IS_APPLE_WEBKIT_IOS&&x.push(b("Stratcom").listen("focus",[h,"editCommentTextArea"],fa));w=!0}function c(){if(!v)return;b("DOM").find(v,"*","textarea").blur()}function I(){if(!v)return;b("DOM").find(v,"*","textarea").focus()}function d(){if(!v)return;var a=b("DOM").find(v,"*","textarea");b("getActiveElement")()===a&&b("MViewport").scrollTo(0,b("Vector").getPos(a).y+a.offsetHeight-b("MViewport").getScreenHeight())}function J(a){if(!a)return;var b=K(),c=a.offsetTop;a=a.offsetHeight;var d=c+a,e=b.getScrollTop();b=b.getScrollHeight();var f=e+b;(c<e||d>f)&&(c<e||a>b?W(Math.max(0,c)):W(Math.max(0,e+(d-f))))}function K(){return b("MLegacyDataStore").get(u).scrollArea}function L(){z||(z=b("DOM").scry(document,"div",h)[0]);return z}function M(){__p&&__p();while(x.length)x.pop().remove();N();R();D();r=null;s=null;t=null;z=null;w=!1}function N(){if(!A)return;while(A.length)A.pop().remove();A=null}function e(a,c,d,e,f){__p&&__p();f=f||{};var g=f.parent_id,h=f.preload_reply_composer_uri_val;f=f.highlighted_preload_composer_input_id;D();G();Q(e,g,f);var i=$(a);X(!1);if(i===r){d&&I();Z(m.COMMENTS);b("Stratcom").invoke("m:feed-ufi-flyout:comments-displayed");Y();return}r=i;Z(m.NONE);var j=b("DOM").find(L(),"div","feed-ufi-comments").id;i=b("XFeedUFICommentsController").getURIBuilder().setString("feedback_target",i).setString("replace_id",j).setBool("focus_composer",!!d);j=b("MLegacyDataStore").get(a).feedback_source;j&&i.setInt("fs",j);d=b("MLegacyDataStore").get(a).share_id;d&&i.setString("share_id",d.toString());j=b("MLegacyDataStore").get(a).action_source;j===void 0;d=qa(a);d&&i.setString("_ft_",d);j=5;for(var d=0;d<j;d++){if(c.hash){var k=new URLSearchParams(c.hash);k=k.get("__tn__");if(k){i.setString("__tn__",k.toString());break}}c=c.parentElement}i=i.getURI();h&&i.addQueryData(p,h);f&&i.addQueryData(q,g||e);k=b("MLegacyDataStore").get(a).actor_id;k&&(i=b("ActorURI").create(i,k.toString()));y=new(b("MRequest"))(i.toString());y.listen("finally",function(){y=null});y.send()}function O(a){a=b("ge")(a+"");if(a&&u&&u.contains(a)){W(a.offsetTop);return a}return null}function P(a){a=a?b("ge")(a+""):null;if(a&&u&&u.contains(a)){a=b("MParent").bySigil(a,j);if(a)return a}return null}function Q(a,c,d){__p&&__p();R(),a&&(B=b("Stratcom").listen("m:feed-ufi-flyout:comments-displayed",null,function(){setTimeout(function(){var e=!!O(a);if(!e&&c){e=O(c);e=e&&b("DOM").scry(e,"*",i)[0];e&&E(e)}e=P(d);e&&H(e)}),R()}))}function R(){B&&(B.remove(),B=null)}function g(a){__p&&__p();a=$(a);X(!0);if(a===s){Z(m.LIKES);return}s=a;Z(m.NONE);var c=b("DOM").find(L(),"div","feed-ufi-likes").id;a=b("XFeedUFILikesController").getURIBuilder().setString("feedback_target",a).setString("replace_id",c).getURI();y=new(b("MRequest"))(a.toString());y.listen("finally",function(){y=null});y.send()}function S(a,c,d){__p&&__p();a=$(a);X(!c);b("Stratcom").invoke("m:feed-ufi-flyout:reactions-displayed");if(a===t&&!d){Z(m.REACTIONS);return}t=a;Z(m.NONE);b("Stratcom").invoke("m:feed-ufi-flyout:cache-reset");c=b("DOM").find(L(),"div","feed-ufi-reactions").id;d=b("XFeedUFIReactionsController").getURIBuilder().setString("feedback_target",a).setString("replace_id",c).getURI();y=new(b("MRequest"))(d.toString());y.listen("finally",function(){y=null});y.send()}function T(a){X(!0);Z(m.NONE);var c=b("DOM").find(L(),"div","feed-ufi-comment-history").id;a=b("XFeedUFICommentHistoryController").getURIBuilder().setString("comment_token",a).setString("replace_id",c).getURI();y=new(b("MRequest"))(a.toString());y.listen("finally",function(){y=null});y.send()}function U(){Z(m.HISTORY)}function aa(){if(!y)return;r=null;s=null;t=null;y.abort();y=null}function ba(){r=null,s=null,t=null}function ca(a){a=$(a);var c=a!==r&&a!==t;Z(c?m.NONE:m.COMMENTS);c&&b("Stratcom").invoke("m:feed-ufi-flyout:reset",null,{target_id:a})}function da(a,c){Z(m.COMMENTS),u=a,v=c,b("Stratcom").invoke("m:feed-ufi-flyout:comments-displayed"),Y()}function ea(){V()}function V(){b("Stratcom").invoke("click","edit-link")}function fa(a){if(A)return;var c=a.getTarget();A=[b("Stratcom").listen("MScrollArea:scrollend",null,function(){var a=c.selectionStart,b=c.selectionEnd;c.setSelectionRange(Math.abs(a-1),Math.abs(b-1));c.setSelectionRange(a,b)}),b("Stratcom").listen("blur",[h,"editCommentTextArea"],function(){N()})]}function ga(){s=null}function ha(a){Z(m.LIKES)}function ia(a){Z(m.REACTIONS)}function ja(a){a=a.getNode(j);if(a)return;var c=L();b("setTimeoutAcrossTransitions")(function(){var a=b("DOM").find(c,"div","feed-ufi-composer-placeholder");W(a.offsetTop)},0);b("CSS").conditionClass(b("DOM").find(c,"div","feed-ufi-comments"),"_5jc2",!0)}function ka(){if(!v)return;var a=L();a&&b("CSS").conditionClass(L(),"_5rpd",b("DOM").scry(v,"input","m-multi-photos-photo").length)}function la(a){W(a.getData().composer.offsetTop)}function ma(a){V();a=a.getData();var b=a.composerRoot;b&&(J(b),G(),setTimeout(function(){H(b)},0))}function na(a){a=a.getData();a=a.selectorNode;J(a)}function oa(a){b("Stratcom").invoke("m:feed-ufi-flyout:comment-change"),W(b("$")(a).offsetTop)}function pa(){b("Stratcom").invoke("m:feed-ufi-flyout:comment-change");var a=L();b("DOM").scry(a,"div","comment").length?K().reflow():b("CSS").conditionClass(b("DOM").find(a,"div","feed-ufi-comments"),"_5jc2",!1)}function W(a){if(!u)return;var c=K();c.reflow();b("setTimeoutAcrossTransitions")(function(){var b=c.getMaxScrollTop();a!==void 0&&(b=Math.min(a,b));c.scrollTo(0,b)},100)}function X(a){var c=L();c&&b("CSS").conditionClass(c,"_5sd3",a)}function Y(){var a=L();if(a){var c=b("DOM").scry(a,"*",k)[0];a=b("DOM").scry(a,"*",l)[0];c&&c.offsetHeight&&b("BanzaiLogger").log("NullStateCommentsLoggerConfig",{event:"flyout_impression",suggestion_type:a?"sticker":null})}}function Z(a){var c=L();if(c){var d;(d=b("CSS")).conditionClass(c,"_5m_y",a==m.COMMENTS);d.conditionClass(c,"_5m_z",a==m.LIKES);d.conditionClass(c,"_3b5-",a==m.REACTIONS);d.conditionClass(c,"_5ugy",a==m.HISTORY)}}function $(a){return b("MLegacyDataStore").get(a).feedback_target.toString()}function qa(a){a=b("MParent").bySigil(a,"story-div");if(!a)return;a=b("MLegacyDataStore").get(a).linkdata;return a?a.toString():null}f.blur=c;f.cancel=aa;f.clearCache=ba;f.focus=I;f.getRoot=L;f.init=a;f.loadComments=e;f.loadLikes=g;f.loadReactions=S;f.loadCommentHistory=T;f.onCommentHistoryLoad=U;f.onCommentAdded=oa;f.onCommentRemoved=pa;f.onCommentsLoad=da;f.onLikesLoad=ha;f.onReactionsLoad=ia;f.reset=ca;f.scrollTo=d}),null);
__d("XPagesManagerPostAttributionSettingsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/{page_token}/settings/post_attribution/",{page_token:{type:"String",required:!0},business_id:{type:"Int"}})}),null);
__d("XUFIActorChangeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/actor/change/",{})}),null);
__d("MUFIActorSelector.react",["fbt","invariant","ActorURI","MActorListDispatcher","MActorListStore","MActorSelector.react","MActorSelectorNuxDispatcher","MActorSelectorNuxStore","MFeedUFI","MLegacyDataStore","MParent","MRequest","OnVisible.react","React","ReactComponentWithPureRenderMixin","ReactDOM","SubscriptionsHandler","XPagesManagerPostAttributionSettingsController","XUFIActorChangeController"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"MUFIActorSelector",mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{feedbackTargetID:a.string.isRequired,location:a.string.isRequired,initialSelectedActorID:a.string.isRequired,initialSelectedActorProfilePicURI:a.string.isRequired,settingsURI:a.string,showFlyoutOnRender:a.bool},getInitialState:function(){b("MActorListDispatcher").explicitlyRegisterStore(b("MActorListStore"));b("MActorSelectorNuxDispatcher").explicitlyRegisterStore(b("MActorSelectorNuxStore"));return{isVisible:!1,selectedActorID:this.props.initialSelectedActorID,selectedActorProfilePicURI:this.props.initialSelectedActorProfilePicURI,showLoadingIndicator:!1,showNux:!1}},render:function(){var a=this;return b("React").createElement(b("OnVisible.react"),{onVisible:function(){return a.setState({isVisible:!0})},onHidden:function(){return a.setState({isVisible:!1})}},b("React").createElement(b("MActorSelector.react"),{actorListID:this.props.feedbackTargetID,actorListRequestPayloadType:"request_ufi_actor_list",coverEnabled:!1,flyoutTitle:this._getFlyoutTitle(),nuxBody:this._getNuxBody(),onChange:this._onChange,onCompleteNux:this._onCompleteNux,selectedActorID:this.state.selectedActorID,selectedActorProfilePicURI:this.state.selectedActorProfilePicURI,settingsURI:this._getSettingsURI(),showLoadingIndicator:this.state.showLoadingIndicator,showNux:this.state.isVisible&&this.state.showNux,showFlyoutOnRender:this.props.showFlyoutOnRender}))},_subscriptionsHandler:null,componentDidMount:function(){var a=this;this._subscriptionsHandler=new(b("SubscriptionsHandler"))();this._subscriptionsHandler.addSubscriptions(b("MActorSelectorNuxStore").addListener("change",function(){var c=b("MActorSelectorNuxStore").canShowUFINux(a.props.feedbackTargetID);!a.state.showNux&&c?a.setState({showNux:!0}):a.state.showNux&&!c&&a.setState({showNux:!1})}));this.props.location==="timeline"&&b("MActorSelectorNuxDispatcher").dispatch({data:{actorSelectorID:this.props.feedbackTargetID},type:"request_ufi_nux_status"})},componentWillUnmount:function(){this._subscriptionsHandler&&(this._subscriptionsHandler.release(),this._subscriptionsHandler=null)},_getFlyoutTitle:function(){return g._("Liking and commenting as:")},_onChange:function(a){__p&&__p();this.setState({selectedActorID:a,showLoadingIndicator:!0});var c=b("ActorURI").create(b("XUFIActorChangeController").getURIBuilder().getURI(),a);c=new(b("MRequest"))(c).setMethod("POST");var d={from_actor_id:this.state.selectedActorID,ft_ent_identifier:this.props.feedbackTargetID,location:this.props.location};c.setData(d);c.listen("done",this._createActorChangeSuccessHandler(a));c.listen("error",this._createActorChangeErrorHandler());c.send();d=b("ReactDOM").findDOMNode(this);if(d instanceof Element){c=b("MParent").bySigil(d,"feed-ufi-metadata");if(c){d=b("MActorListStore").getActorData(a);d||h(0,1770);b("MLegacyDataStore").set(c,{actor_id:a,actor_name:d.name})}}b("MFeedUFI").clearCache()},_createActorChangeSuccessHandler:function(a){var c=this;return function(){var d=b("MActorListStore").getActorData(a);d||h(0,1770);c.setState({selectedActorID:a,selectedActorProfilePicURI:d.profilePicURI,showLoadingIndicator:!1})}},_createActorChangeErrorHandler:function(){var a=this,b=this.state.selectedActorID,c=this.state.selectedActorProfilePicURI;return function(){a.setState({selectedActorID:b,selectedActorProfilePicURI:c,showLoadingIndicator:!1})}},_getNuxBody:function(){return g._("Like, comment or share as yourself or as one of the Pages that you manage.")},_getSettingsURI:function(){return b("XPagesManagerPostAttributionSettingsController").getURIBuilder().setString("page_token",this.props.feedbackTargetOwnerID).getURI()},_onCompleteNux:function(){b("MActorSelectorNuxDispatcher").dispatch({type:"ufi_nux_seen"})}});e.exports=c}),null);