if (self.CavalryLogger) { CavalryLogger.start_js(["eS\/no"]); }

__d("OGComposerConstants",[],(function(a,b,c,d,e,f){e.exports={EditAttachmentURI:"/ajax/composerx/attachment/edit/",ExercisesTypeID:718343998201893,TransitivityStateIntransitive:2}}),null);
__d("PrivacyConst",[],(function(a,b,c,d,e,f){e.exports={BaseValue:{FRIEND_LIST:129,FRIENDS_PLUS_GAMER_FRIENDS:128,FRIENDS_MINUS_ACQUAINTANCES:127,FACEBOOK_EMPLOYEES:112,FACEBOOK_EMPLOYEE_DOGFOODING:113,CUSTOM:111,EVERYONE:80,NETWORKS_FRIENDS_OF_FRIENDS:60,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SELF:10,NOBODY:0},CustomPrivacyTokens:{FRIENDS:247124075410460,FRIENDS_OF_FRIENDS:498125493540100},FriendsValue:{EVERYONE:80,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SOME_FRIENDS:30,SELF:10,NO_FRIENDS:0},PostParam:{EVERYONE:300645083384735,NETWORKS_FRIENDS:123780391104836,FRIENDS_OF_FRIENDS:275425949243301,FRIENDS:291667064279714,FRIENDS_MINUS_ACQUAINTANCES:284920934947802,ONLY_ME:286958161406148,FB_ONLY:411331705596297,EVENT_PUBLIC:1493271774218406,EVENT_INVITE_ONLY:599950423437029},PrivacyField:{CURRENT_COMPOSER:8787670733,DEFAULT_COMPOSER:875106179167765,TIMELINE_TAGGED_CONTENT_VISIBILITY:8787530733,WALL_POSTS:8787370733,TAG_EXPANDED_CONTENT:8787795733,SEARCH_BY_PHONE:8787815733,SEARCH_BY_EMAIL:8787820733,CAN_FRIEND:8787540733,DEPRECATED_APP_DEFAULT:8787700733,SEARCH_BY_NAME:8787755733,SEARCH_BY_CONTACT_INFO:8787760733,SCREENNAME:8787335733,CURRENT_ADDRESS:8787355733,FRIENDS:8787365733,WEBSITE:8787375733,STATUS_UPDATES:8787395733,BIRTHDAY:8787510733,BIRTHYEAR:8787805733,CAN_COMMENT:8787535733,RELATIONSHIPS:8787550733,PROFILE_PICTURE_ALBUM:8787565733,DASHBOARD_ACTIVITY:8787575733,FAMILY:8787585733,INTERESTED_IN_LOOKING_FOR:8787590733,PLACES:8787620733,NAME_DAY:8787810733,LANGUAGES:8787625733,QUOTATIONS:8787630733,ABOUT_ME:8787635733,POLITICAL:8787640733,RELIGIOUS:8787645733,CURRENT_CITY:8787650733,HOMETOWN:8787655733,PROFILE_LIKES_AND_INTERESTS:8787660733,BLURB:8787665733,OTHER_LIKES_AND_INTERESTS:8787680733,SUBSCRIBERS:8787690733,SUBSCRIBED_TO:8787695733,PERSONAL_CONTACT_DEFAULT:8787765733,PAGE_CONTACT_DEFAULT:8787770733,AUTO_GENERATED_FB_EMAIL:8787775733,SKILLS:8787780733,CUSTOM_GENDERS:237760973066217,LOCATION_DO_NOT_WRITE_DIRECTLY:8787785733,SOCIAL_ADS:7719929599,PLATFORM_ADS:126540474531,BASS_ADS:183468681673909,ACTIVITIES:144331422306930,INTERESTS:113693108715766,MUSIC:172372399483077,BOOKS:100725463352700,GAMES:199298603444535,MOVIES:201146206594049,TV_SHOWS:129665560441221,SPORTS_PLAYED:129991670408857,FAVORITE_TEAMS:225288534151802,FAVORITE_ATHLETES:203380763033334,PEOPLE_I_ADMIRE:210380795648667,FAVORITE_FOODS:585935528106425,FAVORITE_RESTAURANTS:172588449584647,FAVORITE_WEBSITES:180412195459106,CLOTHING_BRANDS:397391233714082,LAST_POST_PRIVACY:314763985364212,SECOND_TO_LAST_POST_PRIVACY:321179124722698,PREVIOUS_SECONDARY_COMPOSER:864562253561430,RECENT_COMPOSER:358304524327898,COMPOSER_CUSTOM_INCLUSION:1067668039947624,COMPOSER_CUSTOM_EXCLUSION:1082068668536535,NOW_COMPOSER:421290164697736,BACKSTAGE_PRIVACY:809506612451171,FACEREC_ENROLLMENT:1709697052669794,DEVICE_PHOTO_PROCESSING:1798505450455620,SPACES_VR_OFFLINE_VISIT_PRIVACY:351913698615451,RESHARES_ON_TIMELINE_VISIBILITY:230094651068076,CAN_POST_TRIBUTES:298481070877996,CAN_SEE_TRIBUTE_POSTS:1909416226028186,TRIBUTES_TAGGED_CONTENT_VISIBILITY:322268258473567,RESHARE_TO_STORIES:282421212606762,RESHARE_STORY_TO_STORIES:855792411486922,REPLIES_TO_STORIES:1362036977298100,EVENT_RESPONSE:316303542562773},TagExpansion:{NONE:0,TAGGEES:1,FRIENDS_OF_TAGGEES:2,FRIENDS_TAGGED:6},ExpansionType:{NONE:0,TAGS_ONLY:1}}}),null);
__d("MCompositionUserActions",["MComposition","MCompositionConstants","MCompositionDispatcher"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MCompositionConstants").ActionTypes;function h(a,c){b("MCompositionDispatcher").handleUpdateFromUserAction({actionType:a,data:c})}a={configDisablePhotosUpdate:function(a){var b={};b.CONFIG={};b.CONFIG.disable_photos=a;h(g.DISABLE_PHOTOS,b)},finalize:function(){h(g.COMPOSITION_FINALIZE,{})},initialize:function(a){h(g.COMPOSITION_INITIALIZE,a||{})},shareLinkUpdate:function(a){var b={};b.SHARE={};b.SHARE.SHARE_URI=a;h(g.SHARE_LINK_UPDATE,b)},shareRemoveLinkPreview:function(a){var b={};b[a]=!0;a={};a.SHARE={};a.SHARE.DISABLED_LINKS=b;h(g.SHARE_REMOVE_PREVIEW,a)},minutiaeRemove:function(){h(g.MINUTIAE_REMOVE,{})},minutiaeSet:function(a){var b={};b.MINUTIAE=a;h(g.MINUTIAE_SET,b)},photoUpdate:function(a){var b={};b.PHOTO=a;h(g.PHOTO_CHANGE,b)},placeRemove:function(){h(g.PLACE_REMOVE,{})},placeSet:function(a){h(g.PLACE_SET,new(b("MComposition"))().setStoreData("PLACE",a).serialize())},statusUpdate:function(a){h(g.STATUS_CHANGE,new(b("MComposition"))().setStoreData("STATUS",a).serialize())},withUpdate:function(a){var b={};b.WITH_TAGS=a;h(g.WITH_CHANGE,b)},groupSellUpdate:function(a){h(g.GROUP_SELL_UPDATE,new(b("MComposition"))().setStoreData("GROUP_SELL",a).serialize())},privacyUpdate:function(a){var b={};b.PRIVACY=a;h(g.PRIVACY_CHANGE,b)},formatUpdate:function(a){var b;h(g.FORMAT_CHANGE,(b={},b.FORMAT=a,b))}};e.exports=a}),null);
__d("MCompositionPrivacyFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRIVACY_FBID:"PRIVACY_FBID",CLOSE_DIALOG:"CLOSE_DIALOG",ALREADY_SAVED_STICKY:"ALREADY_SAVED_STICKY",NEVER_SAVE_STICKY:"NEVER_SAVE_STICKY",CUSTOM_LABEL:"CUSTOM_LABEL",CUSTOM_OPTION:"CUSTOM_OPTION"})}),null);
__d("MCompositionPrivacyStore",["MCompositionConstants","MCompositionPrivacyFields","MCompositionStore","emptyFunction"],(function(a,b,c,d,e,f){a=b("MCompositionConstants").ActionTypes;c=new(b("MCompositionStore"))("PRIVACY",b("MCompositionPrivacyFields")).setRequiredFields("PRIVACY_FBID").setHandlerFor(a.COMPOSITION_FINALIZE,b("emptyFunction").thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,b("emptyFunction").thatReturnsArgument).setHandlerFor(a.PRIVACY_CHANGE,b("emptyFunction").thatReturnsArgument).register();e.exports=c}),null);
__d("MCompositionShareStore",["MCompositionConstants","MCompositionShareFields","MCompositionStore","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();a=b("MCompositionConstants").ActionTypes;var g=new(b("MCompositionStore"))("SHARE",b("MCompositionShareFields")).setHandlerFor(a.COMPOSITION_FINALIZE,b("emptyFunction").thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,b("emptyFunction").thatReturnsArgument).setHandlerFor(a.SHARE_LINK_UPDATE,function(a){return babelHelpers["extends"]({},g.getAll(),a)}).setHandlerFor(a.SHARE_REMOVE_PREVIEW,function(a){a=a||{};var b="DISABLED_LINKS",c=g.getAll(),d={};d[b]=babelHelpers["extends"]({},c[b],a[b]);d.SHARE_URI=null;d.LINK_NO_CHANGE=!1;return babelHelpers["extends"]({},c,d)}).register();e.exports=g}),null);
__d("XPrivacyCustomSaveController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/custom/save/",{id:{type:"String"},allow:{type:"String"},deny:{type:"String"},settings:{type:"String"},dont_update_sticky:{type:"Bool",defaultValue:!1},return_uri:{type:"String"}})}),null);
__d("MSavedCustomAudienceSelector",["csx","CSS","DOM","EventListener","LoadingIndicator","MCompositionPrivacyStore","MModalDialog","MRequest","Parent","PrivacyConst","Stratcom","XPrivacyCustomSaveController","goURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a,c,d,e,f,g,h,i,j,k){__p&&__p();var l=this;this.setLoading=function(a){this.$2=a};this.$15=function(a){a=a.getNode("typeahead-result");var b=a.getAttribute("rel");this.$19(a.childNodes[0],b,!this.$8.has(b))};this.$12=function(a){var c=b("Parent").bySelector(a.target,"._5f25"),d=a.target.value;a=a.target.checked;this.$19(c,d,a)};this.$19=function(a,c,d){__p&&__p();if(!this.$7.has(c)){a=a.cloneNode(!0);b("CSS").removeClass(a,"touched");b("DOM").appendContent(this.$4,a);this.$7.add(c)}d?this.$8.add(c):this.$8["delete"](c);a=b("DOM").scry(this.$3,"input");a.forEach(function(a){a.value===c&&(a.checked=d)})};this.$13=function(a){a=a.target.value.trim()==="";this.$20(a)};this.$14=function(a){this.$5.value="",this.$20(!0)};this.$20=function(a){b("CSS").conditionShow(this.$3,a),b("CSS").conditionShow(this.$6,!a),a&&b("Stratcom").invoke("search-cancel")};this.getData=function(){var a=this.$21(),c=[],d=[];this.$9==="friends_except"?(c=[b("PrivacyConst").CustomPrivacyTokens.FRIENDS],d=Array.from(this.$8)):c=Array.from(this.$8);return{id:this.$11,allow:c,deny:d,dontUpdateSticky:a}};this.$18=function(){var a=this,c=b("XPrivacyCustomSaveController").getURIBuilder().getURI();c=new(b("MRequest"))(c).setAutoProcess(!1).setMethod("POST").setData(this.getData());c.listen("done",function(c){b("Stratcom").invoke("MCustomPrivacy::save",null,c),a.$1()});this.$2();c.send()};this.$17=function(){b("LoadingIndicator").show(),b("MModalDialog").close({canceled:!1,goBack:!0})};this.$16=function(){b("goURI")(this.$10)};this.setNavigation=function(a){this.$1=a};this.$21=function(){return this.$11==="0"?b("MCompositionPrivacyStore").get("NEVER_SAVE_STICKY",!1):!0};this.isSelected=function(a){return this.$8.has(a)};this.$4=c;this.$3=a;this.$7=g;this.$8=h;this.$5=e;this.$6=f;this.$9=i;this.$10=j;this.$11=k;var m=[];m.push(b("EventListener").listen(a,"change",this.$12.bind(this)));m.push(b("EventListener").listen(d,"input",this.$13.bind(this)));m.push(b("EventListener").listen(f,"click",this.$14.bind(this)));m.push(b("Stratcom").listen(["touchstart","mousedown"],"jx-typeahead-results",this.$15.bind(this)));this.$1=function(){return l.$16()};this.$2=function(){return l.$17()};m.push(b("Stratcom").listen("click","saved-custom-privacy-save",this.$18.bind(this)));m.push(b("Stratcom").listen([b("MModalDialog").WILL_CLOSE_EVENT,b("MModalDialog").STEP_CHANGE_EVENT,"m:page:unload"],null,function(){m&&m.forEach(function(a){a.remove()}),m=null}))};e.exports=a}),null);
__d("MSavedCustomAudienceSelectorStore",["CSS","DOM","MSavedCustomAudienceSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_instances:{},_onNavigation:null,_onLoading:null,init:function(a,c,d,e,f,g,h,i,j,k){a=new(b("MSavedCustomAudienceSelector"))(a,c,d,e,f,g,h,i,j,k);this._onNavigation!==null&&a.setNavigation(this._onNavigation);this._onLoading!==null&&a.setLoading(this._onLoading);this._instances[i]=a},getInstance:function(a){return this._instances[a]},setNavigation:function(a){this._onNavigation=a},setLoading:function(a){this._onLoading=a},resetNavigationAndLoading:function(){this._onNavigation=null,this._onLoading=null},syncPagedItems:function(a,c){var d=this,e=b("DOM").scry(a,"input");e.forEach(function(a){d.getInstance(c).isSelected(a.value)&&(a.checked=!0)});b("CSS").show(a)}};e.exports=a}),null);
__d("XPrivacyCustomEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/custom/edit/",{post_id:{type:"String"},privacy_id:{type:"String"}})}),null);
__d("XPrivacyTimelineSavedCustomAudienceSelectorDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/timeline/saved_custom_audience_selector_dialog/",{selected_option:{type:"String"},has_tags:{type:"Bool",defaultValue:!1},use_small_icon:{type:"Bool",defaultValue:!1}})}),null);
__d("MBlackbirdTimelinePrivacySelectorListener",["csx","CSS","DOM","MCompositionPrivacyStore","MModalDialog","MRequest","MSavedCustomAudienceSelectorStore","Parent","Stratcom","XPrivacyCustomEditController","XPrivacyTimelineSavedCustomAudienceSelectorDialogController","$","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={_privacyField:null,_activeCustomDialogID:null,_savedCustomType:null,_updateIcon:function(){},_customListener:null,_useSmallIcon:!1,initPrivacyButton:function(a,c,d,e){var f=this;this._privacyField=c;this._useSmallIcon=e;b("DOM").listen(a,"click",null,function(){f.openSelector(a,d)})},openSelector:function(a,c){__p&&__p();var d=this;c||b("DOM").hide(this._getComposerView());this._customListener===null&&this._setupCustomListener();b("MSavedCustomAudienceSelectorStore").setNavigation(function(){b("MModalDialog").close({canceled:!1,goBack:!0})});b("MSavedCustomAudienceSelectorStore").setLoading(function(){b("MModalDialog").setSpinnerVisibility(!0),b("MModalDialog").setHeaderButtonsEnabledState(!1)});var e=b("DOM").scry(b("$")("m_composer_privacy_selector"),"input")[0].value;b("MModalDialog").open(b("XPrivacyTimelineSavedCustomAudienceSelectorDialogController").getURIBuilder().setString("selected_option",e).setBool("has_tags",this._hasTags(a)).setBool("use_small_icon",this._useSmallIcon).getURI(),function(){c||(b("DOM").hide(b("$")("viewport")),b("DOM").show(d._getComposerView()));if(d._hasTags(a)){var e=b("DOM").find(a,"span","plus-label");b("DOM").show(e)}})},initCustomMenuListener:function(a,c,d){var e=this;b("DOM").listen(a,"click",null,function(){e._updateIcon=function(){var c=b("ge")("m_composer_privacy_selector");if(c){c=b("DOM").find(c,"div","privacy-button-icon");var d=b("DOM").scry(a,"i","small-icon")[0]||b("DOM").scry(a,"i","icon")[0];d!=null&&b("DOM").setContent(c,e._newIconFromElement(d))}}})},initSelectionListener:function(a){__p&&__p();var c=this,d=b("Stratcom").listen("MPrivacySettingsSelector:selected",null,function(d){d=d.getData();if(d.isCustom){var e=b("XPrivacyCustomEditController").getURIBuilder().setString("privacy_id",d.value).getURI();b("MModalDialog").load(e.toString());b("MModalDialog").setHeaderButtonsEnabledState(!0)}else d.isSavedCustom||(c._updateIconForData(d),c._updateLabel(d.labelElement.innerText),c._updateSticky(a,d.value),b("Stratcom").invoke("MPrivacyComposerMenu::change",null,{value:d.value,showPlus:!0,iconHTML:d.iconElement,optionLabel:d.labelElement,instance:c}))});b("Stratcom").listen(["m:history:change","MCustomPrivacy::removeListener"],null,function(){d.remove(),b("Stratcom").removeCurrentListener()})},_setupCustomListener:function(){var a=this;this._customListener=b("Stratcom").listen("MCustomPrivacy::save",null,function(c){c=c.getData();a._updateIcon();a._updateLabel(c.payload.description);a._privacyField.value=c.payload.value;b("Stratcom").invoke("MPrivacyComposerMenu::change",null,{value:c.payload.value})});b("Stratcom").listen(["MCustomPrivacy::removeListener","m:page:unload"],null,function(){a._customListener&&a._customListener.remove(),a._customListener=null,b("Stratcom").removeCurrentListener(),b("MSavedCustomAudienceSelectorStore").resetNavigationAndLoading()})},_newIconFromElement:function(a){a=a.cloneNode(!0);return b("CSS").show(a)},_updateIconForData:function(a){this._privacyField.value=a.value;var c=b("ge")("m_composer_privacy_selector");if(c){c=b("DOM").find(c,"div","privacy-button-icon");b("DOM").setContent(c,this._newIconFromElement(a.smallIconElement||a.iconElement))}},_updateLabel:function(a){var c=b("ge")("m_composer_privacy_selector");if(c){c=b("DOM").scry(c,"span","button-text");c.length===1&&b("DOM").setContent(c[0],a)}},_getComposerView:function(){return b("$")("composer-main-view-id")},_hasTags:function(a){a=b("Parent").bySelector(a,"._27-k");return a!==null},_updateSticky:function(a,c){__p&&__p();var d=b("MCompositionPrivacyStore").get("NEVER_SAVE_STICKY",!1);if(!d){d=new(b("MRequest"))(a).setAutoProcess(!1).setMethod("POST").setData({privacyx:c});d.listen("done",function(){b("MModalDialog").close({canceled:!1,goBack:!0})});b("MModalDialog").setSpinnerVisibility(!0);b("MModalDialog").setHeaderButtonsEnabledState(!1);d.send()}else b("MModalDialog").close({canceled:!1,goBack:!0})}};e.exports=a}),null);
__d("MFriendsTaggerReact",["invariant","DOM","MLegacyDataStore","$","createDeprecatedProperties","eventsMixinDeprecated","getActiveElement"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.setRoot(a),b("DOM").listen(this.getRoot(),"click",null,this.$1.bind(this))}var c=a.prototype;c.hide=function(){var a=b("getActiveElement")();a&&a.blur();b("DOM").hide(this.getRoot())};c.show=function(){b("DOM").show(this.getRoot()),this.getTokenizer().component.init(),this.onShow&&this.onShow()};c.clear=function(){var a=b("DOM").find(this.getRoot(),"div","tokenizer");a=b("MLegacyDataStore").get(a);a.tokenizer&&(this.setEntries([]),this.onClear&&this.onClear())};c.hasTokens=function(){return this.getEntries().length>0};c.getTokens=function(){return this.getEntries().reduce(function(a,b){a[b.id]=b;return a},{})};c.removeToken=function(a){this.getTokenizer().component.onRemoveFromCollection(a)};c.getEntries=function(){return this.getTokenizer().component.getEntries()};c.setEntries=function(a){this.getTokenizer().component.setEntries(a)};c.$1=function(a){a.getNode("cancel_with_tagger")?this.$2():a.getNode("submit_with_tagger")&&this.$3()};c.$2=function(){this.hide(),this.invoke("cancel",{})};c.$3=function(){var a=this.getEntries();this.hide();this.invoke("submit",{tokens:a})};c.getTokenizer=function(){var a=b("DOM").find(this.getRoot(),"div","tokenizer");a=b("MLegacyDataStore").get(a);a||g(0,1304);a.tokenizer||g(0,1305,Object.keys(a).join(" "));return a.tokenizer};c.setOnShow=function(a){this.onShow=a};c.setOnClear=function(a){this.onClear=a};a.fromID=function(c){c=b("$")(c);var d=b("MLegacyDataStore").get(c);d.$4||(d.$4=new a(c));return d.$4};a.getFriendIds=function(a){return a.friend_ids?a.friend_ids:a.tokens.map(function(a){return a.id})};return a}();b("createDeprecatedProperties")(a,{root:null});b("eventsMixinDeprecated")(a,["submit","cancel"]);e.exports=a}),null);
__d("MPlacesCategorySelector",["DOM","MLegacyDataStore","MRequest","Stratcom","createDeprecatedProperties","eventsMixinDeprecated"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._root=a,this._listeners=[b("Stratcom").listen("click",[a.getAttribute("data-sigil"),"cancel_places_category_selector"],this._cancel.bind(this)),b("Stratcom").listen("click",[a.getAttribute("data-sigil"),"category_option"],this._submit.bind(this))],this._currentlyMakingServerRequest=!1,this._viewcount=1}var c=a.prototype;c.hide=function(){b("DOM").hide(this._root)};c.show=function(){b("DOM").show(this._root)};c.cleanup=function(){while(this._listeners.length)this._listeners.pop().remove()};c._hideCurrentChild=function(){for(var a=0;a<this._viewcount-1;a++){if(!this._root.childNodes[a])return;b("DOM").hide(this._root.childNodes[a])}};c._showCurrentChild=function(){if(this._viewcount>=1){var a=this._getCurrentVisibleView();b("DOM").show(a)}};c._deleteLastChild=function(){var a=this._root.childElementCount;a>=1&&b("DOM").remove(this._root.childNodes[a-1])};c._deleteAllChildren=function(){var a=this._root.childElementCount;for(var c=a-1;c>=1;c--)b("DOM").remove(this._root.childNodes[c]);a>=1&&b("DOM").show(this._root.childNodes[0]);this._viewcount=1};c._getCurrentVisibleView=function(){return this._root.childNodes[this._viewcount-1]};c._submit=function(a){__p&&__p();if(this._currentlyMakingServerRequest)return;var c=this._getCurrentVisibleView(),d=b("DOM").find(c,"*","loading"),e=b("DOM").find(c,"div","category-list-view");c=b("MLegacyDataStore").get(a.getNode("category_option"));if(c.haschildren){this._currentlyMakingServerRequest=!0;this._hideCurrentChild();b("DOM").show(d);b("DOM").hide(e);var f=new(b("MRequest"))("/places/addform/category.php");f.listen("done",function(){this._viewcount=this._viewcount+1,this._hideCurrentChild(),this._currentlyMakingServerRequest=!1,b("DOM").hide(d),b("DOM").show(e)}.bind(this));f.addData({parent_category_id:c.id,target_id:this._root.id});f.setMethod("GET");f.send()}else{this._deleteAllChildren();this._currentid=null;f={category_name:c.name,category_value:c.id};this.hide();this.invoke("submit",f)}a.kill()};c._cancel=function(a){if(this._currentlyMakingServerRequest)return;this._viewcount>1?(this._deleteLastChild(),this._viewcount--,this._showCurrentChild()):(this.hide(),this.invoke("cancel"))};return a}();b("eventsMixinDeprecated")(a,["submit","cancel"]);b("createDeprecatedProperties")(a,{disableFacewebHooks:!1});Object.assign(a.prototype,{_root:null,_currentlyMakingServerRequest:null,_viewcount:null});e.exports=a}),null);
__d("MPlacesAddView",["DOM","FBJSON","MPlacesCategorySelector","MRequest","Stratcom","ge"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=null,r,s=null,t=null,u=null,v=null,w=null,x=null,y=!0,z={init:function(A){__p&&__p();g=b("ge")(A);if(!g)return;m=b("DOM").scry(g,"div","places-category-selector-container")[0];if(m){j=new(b("MPlacesCategorySelector"))(m);i=(A=b("DOM")).find(g,"div","add-place-form");a=A.find(g,"div","new-place-name");n=A.find(a,"input","");c=A.find(g,"div","new-place-address");o=A.find(c,"input","");d=A.find(g,"div","new-place-phone");p=A.find(d,"input","");f=A.find(g,"div","new-place-website");q=A.find(f,"input","");r=A.find(g,"div","new-place-zip");s=A.find(r,"input","");v=A.scry(g,"input","is_current")[0];k=A.find(g,"span","category_input_display_text");l=A.scry(g,"input","category_input_value")[0];t=A.scry(g.parentNode.parentNode,"div","place-header")[0];u=A.find(g,"div","address-error-box")}else n=b("DOM").find(g,"input","new-place-name");h=b("DOM").find(g,"button","add_place_submit");this._listeners=[b("Stratcom").listen("click","add_place_submit",z._verifyAndSubmitAddPlace.bind(this)),b("Stratcom").listen("MStructuredComposer:cleanup",null,z._cleanup.bind(this)),b("Stratcom").listen("m:places:map:move",null,function(a){w=a.getData().lat,x=a.getData().lng}),b("Stratcom").listen("m:places:map:render",null,function(a){a=b("FBJSON").parse(a.getData(),e.id);w=a.latitude;x=a.longitude})];n.addEventListener("focus",function(){y&&(n.blur(),y=!1)});m&&(this._listeners.push(b("Stratcom").listen("click","category-selector",z._showCategorySelector.bind(this))),this._listeners.push(j.listen("cancel",z._cancelCategorySelector.bind(this))),this._listeners.push(j.listen("submit",z._submitCategorySelector.bind(this))))},_cleanup:function(){while(this._listeners.length)this._listeners.pop().remove();j&&j.cleanup()},_showCategorySelector:function(a){t&&b("DOM").hide(t),b("DOM").hide(i),b("DOM").show(m),a.kill()},_showAddButton:function(){return!l.value?!1:!0},_updateCategorySelector:function(a){if(k&&a){var c=a.category_name;a=a.category_value;b("DOM").setContent(k,c);a.length!==0&&(l.value=a,h.disabled&&z._showAddButton()&&(h.disabled=!1))}},_submitCategorySelector:function(a){z._updateCategorySelector(a),b("DOM").hide(m),b("DOM").show(i),b("Stratcom").invoke("m:places:addplace:show"),y=!0,t&&b("DOM").show(t)},_cancelCategorySelector:function(){b("DOM").hide(m),b("DOM").show(i),b("Stratcom").invoke("m:places:addplace:show"),y=!0,t&&b("DOM").show(t)},_verifyAndSubmitAddPlace:function(a){__p&&__p();var c={new_place:!0,name:n.value};m&&(c.phone=p.value,c.address=o.value,c.website=q.value,c.zip=s.value);c.is_current=!0;v&&(c.is_current=v.checked);w&&(c.latitude=w,c.longitude=x);if(l)c.topic_tokens=l;else{var d=b("DOM").scry(g,"span","token");c.topic_tokens=d}if(c.address){d=new(b("MRequest"))("/places/addform/verifyaddress.php");d.listen("done",function(b){b.actions.length===1?this._submitData(c,a):a.kill()}.bind(this));d.setData({address:c.address,latitude:c.latitude,longitude:c.longitude,target_id:u.id}).setMethod("GET").send()}else this._submitData(c,a)},_submitData:function(a,c){a.name.length!==0?(b("DOM").hide(g),b("Stratcom").invoke("m:places:addform:submit",null,a)):c.kill()}};e.exports=z}),null);
__d("MPlaces",["DOM","FWLoader","LoadingIndicator","MLegacyDataStore","MPageController","MRequest","Stratcom","URI","XPlacesUpdateLocationController","$"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("FWLoader").FW,i={LINK_SIGIL:"gps-link",FORM_SIGIL:"gps-form",UPDATE_LOCATION_INTERVAL:6e4,desiredProperties:["latitude","longitude","accuracy","altitude","altitudeAccuracy","heading","speed"],locationOptions:{enableHighAccuracy:!0,timeout:6e4,maximumAge:3e5},watchID:null,pendingHref:"",pendingForm:null,_JSONLocation:"",_currentSearchMode:null,_lastUpdateTime:0,enableFWGeolocation:!0,locationSearchModes:{SEARCH_MODE:"m",MODE_COMPOSER:"cp",MODE_CHECKIN:"ci"},setCurrentJSONLocation:function(a){i._JSONLocation=a},getCurrentJSONLocation:function(){return i._JSONLocation},setLocationSearchMode:function(a){i._currentSearchMode=a},getLocationSearchMode:function(){return i._currentSearchMode},shouldUseFWGeolocation:function(){return window.FW_ENABLED&&h.isIOS()&&i.enableFWGeolocation},updateLocation:function(a){__p&&__p();if(a){i.shouldUseFWGeolocation()&&(a={coords:a});var c={},d;for(var e=0;e<i.desiredProperties.length;e++)d=i.desiredProperties[e],a.coords[d]&&(c[d]=a.coords[d]);a.timestamp&&(c.timestamp=a.timestamp/1e3);i._JSONLocation=JSON.stringify(c);i.sendCurrentLocationToServer();i.pendingForm?i.submitForm(i.pendingForm):i.pendingHref&&i.gotoPage(i.pendingHref);i.pendingForm=null;i.pendingHref="";b("Stratcom").invoke("location-update",null,{position:a})}},handleError:function(a){i.clearWatch(),b("Stratcom").invoke("location-error",null,{error:a}),i.pendingForm?(i.submitForm(i.pendingForm),i.pendingForm=null):i.pendingHref&&(i.gotoPage(i.pendingHref),i.pendingHref="")},sendCurrentLocationToServer:function(){var a=Date.now();if(a-i._lastUpdateTime>i.UPDATE_LOCATION_INTERVAL){i._lastUpdateTime=a;a=b("XPlacesUpdateLocationController").getURIBuilder().setString("json_location",i._JSONLocation).setEnum("source","msite_places").getURI();new(b("MRequest"))(a).setMethod("POST").send()}},gotoPage:function(a){a=new(g||(g=b("URI")))(a);a.addQueryData("json_location",i._JSONLocation);b("MPageController").load(a)},submitForm:function(a){a.appendChild(b("DOM").create("input",{name:"json_location",type:"hidden",value:i._JSONLocation})),(!a.onsubmit||a.onsubmit())&&a.submit()},clearWatch:function(){if(!i.watchID)return;i.shouldUseFWGeolocation()?h.geolocation.clearWatch():navigator.geolocation.clearWatch(i.watchID);i.watchID=null},watchPosition:function(){if(i.shouldUseFWGeolocation())i.watchID=1,h.geolocation.watchPosition(i.updateLocation,i.handleError),h.geolocation.getCurrentPosition(i.updateLocation);else{var a=setTimeout(i.handleError,i.locationOptions.timeout);i.watchID=navigator.geolocation.watchPosition(function(b){clearTimeout(a),i.updateLocation(b)},function(b){clearTimeout(a),i.handleError(b)},i.locationOptions)}},monitorLocation:function(){i.clearWatch(),i.watchPosition(),b("MRequest").listen("postprocess",function(){!document.getElementById("place_update")&&i.watchID&&i.clearWatch()})},submitFormWithLocation:function(a){__p&&__p();typeof a==="string"&&(a=b("$")(a));var c=i;b("LoadingIndicator").show();if(c.watchID&&c._JSONLocation){c.submitForm(a);return}c.pendingHref="";c.pendingForm=a;c.monitorLocation();return!1},gotoPageWithLocation:function(a){__p&&__p();var c=i;b("LoadingIndicator").show();if(c.watchID&&c._JSONLocation){c.gotoPage(a);return}c.pendingForm=null;c.pendingHref=a;c.monitorLocation();return!1},onClick:function(a){a.kill();a=b("MLegacyDataStore").get(a.getNode(i.LINK_SIGIL));i.gotoPageWithLocation(a.href)},onSubmit:function(a){a.kill();a=b("DOM").find(a.getNode(i.FORM_SIGIL),"form");i.submitFormWithLocation(a)}};e.exports=i}),null);
__d("MPlacesTagger",["fbt","DOM","FWLoader","Keys","MLegacyDataStore","MParent","MPlaces","MRequest","MTaggingCounter","Stratcom","$","eventsMixinDeprecated"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("FWLoader").FW;a=function(){"use strict";__p&&__p();function a(a,c){__p&&__p();var d;this._root=a;this._addPlaceView=(d=b("DOM")).find(a,"div","add-place");this._disableFacewebHooks=!1;this._errorMessage=d.find(a,"div","error-message");this._isOpen=!1;this._searchView=d.find(a,"div","places-search");this._throbber=d.find(a,"div","throbber");this._locationToggle=d.scry(a,"div","location-toggle")[0];this._newPlaceName=d.scry(a,"div","new-place-name")[0];this._overrideLocation=c;this._newPlaceName?this._newPlaceNameTextbox=b("DOM").find(this._newPlaceName,"input",""):this._newPlaceNameTextbox=b("DOM").find(this._addPlaceView,"input","new-place-name");window.FW_ENABLED||(this._placeHeader=b("DOM").find(a,"div","place-header"));this._listeners=[b("Stratcom").listen("click","cancel_at_tagger",this._cancel.bind(this)),b("Stratcom").listen("click","place_result",this._submit.bind(this)),b("Stratcom").listen("click","add_place_link",this._showAddPlace.bind(this)),b("Stratcom").listen("click","freeform_link",this._submitFreeformPlace.bind(this)),b("Stratcom").listen("click","get-location",this._getLocation.bind(this)),b("Stratcom").listen("click","abort-location",this._abortLocation.bind(this)),b("Stratcom").listen("m:places:addform:submit",null,this._submitAddPlace.bind(this)),b("Stratcom").listen("keydown","quicksearch-input",this._submitFreeFormText.bind(this)),b("Stratcom").listen("m:page:unload",null,this.cleanup.bind(this))]}var c=a.prototype;c.cleanup=function(){for(var a=0;a<this._listeners.length;a++)this._listeners[a].remove();this._listeners=[]};c.getDisableFacewebHooks=function(){return this._disableFacewebHooks};c.getRoot=function(){return this._root};c.hide=function(){window.FW_ENABLED&&h.setNavBarButton("","1;"),b("DOM").hide(this._addPlaceView),b("DOM").show(this._searchView),b("DOM").hide(this._root),this._isOpen=!1};c.setDisableFacewebHooks=function(a){this._disableFacewebHooks=a};c.show=function(){var a=this;this._isOpen=!0;this._locationToggle&&b("DOM").hide(this._throbber);window.FW_ENABLED?h.setNavBarButton(g._("Cancel"),this._cancel.bind(this)):this._locationToggle&&!this._hasLocation&&b("DOM").show(this._locationToggle);this._locationToggle?this._showed():this._overrideLocation?window.setTimeout(function(){b("Stratcom").invoke("m:quicksearch:places:search-with-location",null,a._overrideLocation),a._showed()},0):!this._hasLocation&&"geolocation"in navigator?(b("MTaggingCounter").logEvent("geo_popup_load"),this._locationListener=b("Stratcom").listen("location-update",null,this._handleLocationUpdate.bind(this)),this._errorListener=b("Stratcom").listen("location-error",null,this._handleLocationError.bind(this)),b("MPlaces").monitorLocation()):this._showed();b("DOM").show(this._root)};c._getLocation=function(){!this._hasLocation&&"geolocation"in navigator&&(this._locationListener=b("Stratcom").listen("location-update",null,this._handleLocationUpdate.bind(this)),this._errorListener=b("Stratcom").listen("location-error",null,this._handleLocationError.bind(this)),b("DOM").show(this._throbber),b("DOM").hide(this._locationToggle),b("MPlaces").monitorLocation())};c._abortLocation=function(){b("DOM").hide(this._throbber),b("DOM").hide(this._locationToggle),b("DOM").hide(this._errorMessage)};c._removeListeners=function(){this._locationListener.remove(),this._errorListener.remove()};c._handleLocationUpdate=function(a){this._removeListeners(),this._hasLocation=!0,b("Stratcom").invoke("m:quicksearch:places:search"),this._locationToggle||b("MTaggingCounter").logEvent("geo_popup_success"),this._showed()};c._handleLocationError=function(a){this._removeListeners(),this._hasLocation=!1,b("DOM").show(this._errorMessage),b("DOM").hide(this._throbber),this._locationToggle?b("DOM").show(this._locationToggle):b("MTaggingCounter").logEvent("geo_popup_fail"),this._showed()};c._showed=function(){if(!this._isOpen)return;window.FW_ENABLED&&!this.getDisableFacewebHooks()&&(h.setNavBarTitle(g._("Add a Place")),h.setNavBarButton(g._("Cancel"),this._cancel.bind(this),h.BUTTON_CANCEL,!1,"left"));this.invoke("showed");b("DOM").show(this._root)};c._cancel=function(){this.invoke("cancel").getPrevented()||(b("Stratcom").invoke("m:quicksearch:places:cancel"),this.hide())};c._submit=function(a){if(b("MParent").bySigil(a.getTarget(),"place-tagger")!==this._root)return;var c=b("MLegacyDataStore").get(a.getNode("place_result"));c.new_place=!1;this._placeResult=c;b("Stratcom").invoke("m:quicksearch:places:click",null,{results:a.getNode("id:places_search_results"),selected_result:a.getNode("place_result")});b("Stratcom").invoke("m:places-tagger:submit",null,c);this.invoke("submit",c);a.kill()};c._submitFreeFormText=function(a){var c=a.getRawEvent();if(c instanceof KeyboardEvent&&c.keyCode===b("Keys").RETURN){c={id:0,isEventResult:!1,isNonSpecific:!1,name:c.target.value,new_place:!1};b("Stratcom").invoke("m:places-tagger:submit",null,c);a.kill()}};c._showAddPlace=function(a){var c=b("MLegacyDataStore").get(a.getNode("add_place_link")).name;this._newPlaceNameTextbox.value=c;b("DOM").hide(this._searchView);b("DOM").show(this._addPlaceView);c=b("DOM").scry(this._addPlaceView,"*","map_view_container")[0];c&&new(b("MRequest"))("/places/showmap.php").addData({target_id:c.id}).setMethod("GET").send();b("Stratcom").invoke("m:places:addplace:show");a.kill()};c._submitAddPlace=function(a){var b=a.getData();this.hide();this.invoke("submit",b);a.kill()};c._submitFreeformPlace=function(a){var c=b("MLegacyDataStore").get(a.getNode("freeform_link"));this.hide();this.invoke("submit",c);a.kill()};a.fromID=function(c){c=b("$")(c);var d=b("MLegacyDataStore").get(c);d._placesTagger||(d._placesTagger=new a(c));return d._placesTagger};return a}();b("eventsMixinDeprecated")(a,["searching","showed","submit","cancel"]);Object.assign(a.prototype,{_hasLocation:!1,_locationListener:null,_errorListener:null,_root:null,_addPlaceView:null,_errorMessage:null,_newPlaceName:null,_newPlaceNameTextbox:null,_searchView:null,_throbber:null,_listeners:null,_placeResult:null});e.exports=a}),null);
__d("MSubscriptionsHandlerMixin",["SubscriptionsHandler","destroyOnUnload"],(function(a,b,c,d,e,f){a={__subscriptionsHandler:null,addSubscriptions:function(){var a=this;this.__subscriptionsHandler||(this.__subscriptionsHandler=new(b("SubscriptionsHandler"))(),b("destroyOnUnload")(function(){a.__subscriptionsHandler.release(),a.__subscriptionsHandler=null}));for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];this.__subscriptionsHandler.addSubscriptions.apply(this.__subscriptionsHandler,d)}};e.exports=a}),null);
__d("MComposerDialogClearablePreview",["DOM","MComposerDialogClearablePreviewConstants","MSubscriptionsHandlerMixin","Stratcom","mixin","mixInEventEmitter"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MComposerDialogClearablePreviewConstants").sigils;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this)||this;e.$MComposerDialogClearablePreview1=d;e.$MComposerDialogClearablePreview2=c;e.addSubscriptions(b("DOM").listen(e.$MComposerDialogClearablePreview2,"click",g.CLEAR,e.$MComposerDialogClearablePreview3.bind(babelHelpers.assertThisInitialized(e))));return e}var d=c.prototype;d.clear=function(){this.hide();b("DOM").setContent(this.$MComposerDialogClearablePreview1,"");return this};d.$MComposerDialogClearablePreview3=function(){this.clear();this.emit("clear");b("Stratcom").invoke("m:quicksearch:places:clear",null,null);return this};d.hide=function(){b("DOM").hide(this.$MComposerDialogClearablePreview2);return this};d.setValue=function(a){b("DOM").setContent(this.$MComposerDialogClearablePreview1,a);this.show();return this};d.show=function(){b("DOM").show(this.$MComposerDialogClearablePreview2);return this};d.showIfHasValue=function(){return this.$MComposerDialogClearablePreview1.innerText?this.show():this.hide()};return c}(b("mixin")(b("MSubscriptionsHandlerMixin")));b("mixInEventEmitter")(a,{clear:!0});e.exports=a}),null);
__d("MComposerOGStrings",["fbt","MinutiaeVerbs","OGComposerConstants"],(function(a,b,c,d,e,f,g){__p&&__p();a={getFBTPhrase:function(a,c,d,e){__p&&__p();e="";switch(a){case b("MinutiaeVerbs").COMPOSER_FEELS:e=g._("{icon}feeling {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_WATCHES:e=g._("{icon}watching {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_READS:e=g._("{icon}reading {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_LISTENS:e=g._("{icon}listening to {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_DRINKS:e=g._("{icon}drinking {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_EATS:e=g._("{icon}eating {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_PLAYS:e=g._("{icon}playing {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_TRAVELS:e=g._("{icon}travelling to {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_LOOKS_FOR:e=g._("{icon} looking for {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_SUPPORTS:e=g._("{icon}supporting {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_CELEBRATES:e=g._("{icon}celebrating {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_MEETS:e=g._("{icon}meeting {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_GETS:e=g._("{icon}getting {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_MAKES:e=g._("{icon}making {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_GOES_TO:e=g._("{icon}going to {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_THINKS_ABOUT:e=g._("{icon}thinking about {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_REMEMBERS:e=g._("{icon}remembering {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_WRITES_A_NOVEL_ABOUT:e=g._("{icon}writing a novel about {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_SELECTS_VERB:e=g._("{icon}{verb}",[g._param("icon",c),g._param("verb",d)]);break;case b("MinutiaeVerbs").COMPOSER_OTHER:e=g._("{icon}{object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_VOTES:e=g._("{icon}voting in {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_ATTENDS:e=g._("{icon}attending {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_AGREES:e=g._("{icon}agrees with {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_DISAGREES:e=g._("{icon}disagrees with {object}",[g._param("icon",c),g._param("object",d)]);break;case b("OGComposerConstants").ExercisesTypeID:e=g._("{icon}{object}",[g._param("icon",c),g._param("object",d)]);break}return e}};e.exports=a}),null);
__d("MOpenGraphTagger",["cx","fbt","CSS","DOM","MarauderLogger","MComposerOGStrings","MCompositionShareStore","MLegacyDataStore","MRequest","Stratcom","$","eventsMixinDeprecated"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){__p&&__p();var c;this.setRoot(a);this._prompt=(c=b("DOM")).find(a,"span","og-composer-prompt");this._defaultPrompt=this._prompt.firstChild;this._defaultIconSelector=c.find(a,"div","og-icon-selector");this._iconSelector=this._defaultIconSelector;this._cancelButton=c.find(a,"button","cancel-og-tagger");this._defaultCancelButtonText=this._cancelButton.firstChild;this._isFromActivityLink=!1;c.listen(this.getRoot(),"click",null,this._handleClick.bind(this));this._listeners=[(a=b("Stratcom")).listen("click","object_result",function(a){__p&&__p();a.prevent();a=a.getNode("object_result");var c=b("MLegacyDataStore").get(a);this._objectID=c.id;this._objectStr=c.name;this._icon=c.icon;this._iconSrc=c.icon_src;this._selectedScore=c.score;this._selectedOriginalID=c.original_id;this._clientTime=c.client_time;this._requestID=c.request_id;this._triggersEventTagExpansion=c.triggers_event_tag_expansion;this._addLoggingDataForNodes(a.parentNode.childNodes);this._showAttachment=b("MCompositionShareStore").isEmpty()&&c.show_attachment;this._customIconID=c.custom_icon;this._submit()}.bind(this)),a.listen("click","at_result",function(a){a.prevent(),this._selectActionType(b("MLegacyDataStore").get(a.getNode("at_result"))),b("MarauderLogger").log("og_composer_verb_selected",void 0,{at_id:this._actionType.id,place_id:this._placeID})}.bind(this)),a.listen("click","quicksearch-input",function(a){if(a.getNode("og-object-search")){a={at_id:this._actionType.id,place_id:this._placeID};b("MarauderLogger").log("og_composer_object_search_clicked",void 0,a)}}.bind(this)),a.listen("keyup","quicksearch-input",function(a){a=a.getNode("quicksearch-input");a&&(this._query=a.value,this._keystrokeCount++,this._lastNotBackspacedQuery.indexOf(this._query)!==0&&(this._lastNotBackspacedQuery=this._query))}.bind(this)),a.listen("composerReset",null,function(a){this._reset(),this._placeID=0}.bind(this))];a.listen("MStructuredComposer:cleanup",null,function(a){for(var a=0;a<this._listeners.length;a++)this._listeners[a].remove();this._listeners=[]}.bind(this));a.listen("MStructuredComposer-opened",null,function(a){this._compositionID=a.getData().session_id}.bind(this))}var c=a.prototype;c.getRoot=function(){return this.root};c.setRoot=function(a){this.root=a};c.hide=function(){b("DOM").hide(this.getRoot()),this.toggleIncludedPlaceSelector(!1)};c.show=function(){b("DOM").show(this.getRoot())};c.updatePrompt=function(a){b("DOM").setContent(this._prompt,a)};c.setPlaceID=function(a){this._placeID=a};c.setSuggestionMechanism=function(a){this._suggestionMechanism=a};c.toggleIncludedPlaceSelector=function(a){var c=b("DOM").scry(this.getRoot(),"div","og_included_place");c.length&&(this._isFromActivityLink=a,a?b("DOM").show(c[0]):b("DOM").hide(c[0]))};c._handleClick=function(a){a.getNode("cancel-og-tagger")&&this.cancel()};c._reset=function(){__p&&__p();var a=b("DOM").scry(this.getRoot(),"div","og-object-search");a.length!==0&&(b("DOM").hide(a[0]),this._showActionTypeSelector());this._hideIconSelector();this._actionType=null;this._suggestionMechanism=null;this._typeaheadSessionID=null;this._candidateResults=null;this._query=null;this._selectedScore=null;this._selectedOriginalID=null;this._clientTime=null;this._requestID=null;this._lastNotBackspacedQuery=null;this._keystrokeCount=null;this.updatePrompt(this._defaultPrompt);this.setCancelButtonText(this._defaultCancelButtonText);b("Stratcom").invoke("m:quicksearch:clear")};c._addLoggingDataForNodes=function(a){this._candidateResults=[];this._numResults=a.length;for(var c=0;c<this._numResults;++c){var d=b("MLegacyDataStore").get(a[c]);this._objectID==d.id&&(this._selectedPos=c);this._candidateResults[c]=d.id?d.id:0}};c._cancelTypeaheadSession=function(){if(!this._typeaheadSessionID)return;this._triggersEventTagExpansion=!1;this._objectID=null;var a=b("DOM").scry(this.getRoot(),"div","object_result");this._addLoggingDataForNodes(a);b("MarauderLogger").log("og_composer_session_abandoned",void 0,{action_type_id:String(this._actionType.id),place_id:this._placeID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,request_id:this._requestID,candidate_results:this._candidateResults,num_results:this._numResults,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount})};c.cancel=function(){b("MarauderLogger").log("og_composer_cancel_tagger",void 0,{suggestion_mechanism:this._suggestionMechanism});var a=this._isFromActivityLink;this._isFromIconSelector&&this.invoke("cancelIconSelection",{action_type_id:this._actionTypeId,query:this._iconSearchInput?this._iconSearchInput.value:""});this._cancelTypeaheadSession();this._reset();this.hide();this.invoke("cancel");a&&this.invoke("cancelFromActivity")};c.setCancelButtonText=function(a){b("DOM").setContent(this._cancelButton,a)};c._showObjectSearch=function(){this._hideActionTypeSelector(),b("DOM").show(b("DOM").find(this.getRoot(),"div","og-object-search"))};c.selectActionTypeImplicitly=function(a){__p&&__p();var c=b("DOM").scry(this.getRoot(),"div","at_result"),d=!1;for(var e=0;e<c.length;e++){var f=b("MLegacyDataStore").get(c[e]);if(f.id==a){d=!0;break}}if(!d)return!1;this._selectActionType(f);return!0};c.showIconSelector=function(a,c,d,e){__p&&__p();this.show();this._hideActionTypeSelector();this.updatePrompt(h._("Select an icon"));this._actionTypeId=a;var f="/platform/og/composer/icon_selector/";f=new(b("MRequest"))(f).setData({actionTypeID:a,objectID:c,objectStr:d,iconID:e});f.listen("postprocess",this._setUpIconSelector.bind(this));f.send();b("DOM").replace(this._iconSelector,this._defaultIconSelector);b("DOM").show(this._iconSelector);b("MarauderLogger").log("og_composer_show_icon_selector")};c._setUpIconSelector=function(){var a=this;this._iconSelector=b("DOM").find(this.getRoot(),"div","og-icon-selector");var c=b("DOM").scry(this._iconSelector,"a","remove-token");c.length!==0&&b("DOM").listen(c[0],"click",null,this._cancelIconSelection.bind(this));this._iconSearchInput=b("DOM").scry(this._iconSelector,"input","icon-search-input")[0];b("DOM").listen(this._iconSelector,"click","og-icon-area",this._selectIcon.bind(this));b("DOM").listen(this._iconSelector,"click","original-og-icon",function(){return a.cancel()});this._isFromIconSelector=!0};c._cancelIconSelection=function(){this._reset(),this.invoke("clear")};c._selectIcon=function(a){__p&&__p();a=a.getNode("og-icon-area");a=a.lastChild.cloneNode();b("DOM").show(a);var c=b("DOM").find(this.getRoot(),"i","token-icon");b("Stratcom").addSigil(a,"token-icon");b("DOM").replace(c,a);this._icon=a;this._iconSrc=b("MLegacyDataStore").get(a).icon_src;this._customIconID=this._icon.getAttribute("data-icon");c=this._iconSearchInput?this._iconSearchInput.value:"";a=this._actionTypeId;this._reset();this.invoke("iconChanged",{icon:this._icon,icon_src:this._iconSrc,custom_icon_id:this._customIconID,action_type_id:a,query:c})};c._selectActionType=function(a){this._typeaheadSessionID=String(Math.floor(Date.now()*Math.random()));this._lastNotBackspacedQuery="";this._keystrokeCount=0;this._actionType=a;a={at_id:this._actionType.id,place_id:this._placeID,sid:this._typeaheadSessionID};b("Stratcom").invoke("m:quicksearch:actionSelected",null,a);this._showObjectSearch();this.updatePrompt(this._actionType.prompt)};c._hideActionTypeSelector=function(){var a=b("DOM").scry(this.getRoot(),"div","og_ats");a.length!==0&&b("CSS").conditionClass(a[0],"_51xt",!0)};c._showActionTypeSelector=function(){var a=b("DOM").scry(this.getRoot(),"div","og_ats");a.length!==0&&b("CSS").conditionClass(a[0],"_51xt",!1)};c._hideIconSelector=function(a){this._isFromIconSelector=!1,this._actionTypeId=null,b("DOM").hide(this._iconSelector),this._showActionTypeSelector()};c._submit=function(){var a={action_type:this._actionType.id,action_type_str:this._actionType.name,object:this._objectID,object_str:this._objectStr,show_attachment:this._showAttachment,icon:this._icon,icon_src:this._iconSrc,fbt_phrase:this._getTagPhrase(this._actionType.id,this._icon,this._objectStr,this._objectID),triggers_event_tag_expansion:this._triggersEventTagExpansion,suggestion_mechanism:this._suggestionMechanism,custom_icon:this._customIconID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,selected_original_id:this._selectedOriginalID,selected_score:this._selectedScore,place_id:this._placeID,client_time:this._clientTime,request_id:this._requestID,display_position:this._selectedPos,num_results:this._numResults,results:this._candidateResults,search_term:this._query,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount};this._reset();this.invoke("submit",a);delete a.icon;delete a.fbt_phrase;b("MarauderLogger").log("og_composer_object_selected",void 0,a)};c._getTagPhrase=function(a,c,d,e){return b("MComposerOGStrings").getFBTPhrase(a,c,d,e)};a.fromID=function(c){c=b("$")(c);var d=b("MLegacyDataStore").get(c);d._ogTagger||(d._ogTagger=new a(c));return d._ogTagger};return a}();b("eventsMixinDeprecated")(a,["submit","cancel","clear","iconChanged","cancelFromActivity","cancelIconSelection"]);Object.assign(a.prototype,{root:null,_prompt:null,_defaultPrompt:null,_actionType:null,_objectID:null,_objectStr:null,_triggersEventTagExpansion:null,_icon:null,_iconSelector:null,_defaultIconSelector:null,_showAttachment:null,_customIconID:null,_placeID:0,_listeners:null,_suggestionMechanism:null,_typeaheadSessionID:null,_compositionID:null,_selectedOriginalID:null,_selectedScore:null,_clientTime:null,_requestID:null,_selectedPos:null,_numResults:null,_candidateResults:null,_query:null,_lastNotBackspacedQuery:null,_keystrokeCount:null});e.exports=a}),null);
__d("MPlacesCurrentLocation",["MPlaces"],(function(a,b,c,d,e,f){a=function(a){b("MPlaces").setCurrentJSONLocation(a.location),b("MPlaces").setLocationSearchMode(a.mode),a.mode==b("MPlaces").locationSearchModes.MODE_CHECKIN&&b("MPlaces").monitorLocation()};f.main=a}),null);
__d("MPlacesInit",["MPlaces","Stratcom"],(function(a,b,c,d,e,f){typeof window.usingGears!=="undefined"&&(b("MPlaces").locationOptions.enableHighAccuracy=!1),b("Stratcom").listen("click",b("MPlaces").LINK_SIGIL,b("MPlaces").onClick),b("Stratcom").listen("submit",b("MPlaces").FORM_SIGIL,b("MPlaces").onSubmit)}),null);
__d("MQuickSearchLogger",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=!1,this.$2=!1,this.$3=null}var b=a.prototype;b.$4=function(){this.$1=!0,this.$2=!1,this.$5=Math.random()};b.$6=function(){this.$1=!1};b.logSessionStart=function(a){};b.logResults=function(a,b){};b.logClick=function(a){};b.onSearch=function(a){this.$1||(this.$4(),this.logSessionStart(a)),this.$3=a};b.onResults=function(a,b){this.logResults(a,b)};b.onCleanup=function(){this.$6()};b.onClick=function(a){this.$2||(this.logClick(a),this.$2=!0,this.$6())};b.getSID=function(){return this.$5};b.getLastRequest=function(){return this.$3};return a}();e.exports=a}),null);
__d("MQuickSearchLoggerPlaces",["MarauderLogger","MLegacyDataStore","MQuickSearchLogger"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.logSessionStart=function(a){b("MarauderLogger").log("m_checkin_search_session_start",void 0,{sid:this.getSID()})};d.logResults=function(a,c){b("MarauderLogger").log("m_checkin_search_results",void 0,{sid:this.getSID(),search_experiment:b("MLegacyDataStore").get(c).searchExperiment})};d.logClick=function(a){__p&&__p();var c=!1,d=-1;if(a){var e=b("MLegacyDataStore").get(a.selected_result);e!==null&&(c=e.isEventResult);var f=[];a.results!==null&&a.results.children!==null&&(f=a.results.children);for(var a=0;a<f.length;a++){var g=b("MLegacyDataStore").get(f[a]);if(e.id===g.id){d=a;break}}}g=-1;if(this.getLastRequest()!==null){a=this.getLastRequest();Object.prototype.hasOwnProperty.call(a,"q")&&Object.prototype.hasOwnProperty.call(a.q,"length")&&(g=this.getLastRequest().q.length)}b("MarauderLogger").log("m_checkin_search_click",void 0,{sid:this.getSID(),query_length:g,position:d,is_event:c})};return c}(b("MQuickSearchLogger"));e.exports=a}),null);
__d("MQuickSearchPlaces",["MPlaces","MQuickSearch","MQuickSearchLoggerPlaces","Stratcom"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();var c,d,e=new(b("MQuickSearchLoggerPlaces"))(),f=new(b("MQuickSearch"))(a,e),g=null,h=f.listen("search",function(a){__p&&__p();var e=g||b("MPlaces").getCurrentJSONLocation();if(e==c&&a==d){b("Stratcom").context().prevent();return}c=b("MPlaces").getCurrentJSONLocation();d=a;a={json_location:c};a[b("MPlaces").locationSearchModes.SEARCH_MODE]=b("MPlaces").getLocationSearchMode();f.maybeAddQueryParameters(a);b("Stratcom").invoke("m:quicksearch:location:change",null,e)}),i=(a=b("Stratcom")).listen("m:quicksearch:places:search-with-location",null,function(a){g=a,f.search()}),j=a.listen("m:quicksearch:places:search",null,function(){f.search()}),k=a.listen("m:quicksearch:places:cancel",null,function(){return f.reset()}),l=a.listen("m:quicksearch:places:click",null,function(a){e.onClick(a.getData())});a.listen("m:page:loading",null,function(){b("Stratcom").removeCurrentListener(),h.remove(),j.remove(),i.remove(),k.remove(),l.remove(),h=j=c=d=f=null})};e.exports=a}),null);
__d("MPlatformDialogTagger",["DOM","Stratcom","SubscriptionsHandler","$","mapObject","mixInEventEmitter"],(function(a,b,c,d,e,f){__p&&__p();var g;a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.init=function(a,c,d){__p&&__p();this.$1=!1;this.$2=new(b("SubscriptionsHandler"))();this.$3=null;this.$4=a;this.$5=c;(a=b("Stratcom")).addSigil(this.$4.getRoot(),d);this.$2.addSubscriptions(a.listen("click",d,this.$6.bind(this)),this.$5.listen("cancel",this.closeTagger.bind(this)),this.$5.listen("submit",this.closeTagger.bind(this)),a.listen("m:history:change",null,function(a){if(!this.$1)return;this.closeTagger();a.prevent()}.bind(this)),a.listen("m:page:unload",null,this.$7.bind(this)))};c.createInputs=function(a,c,d){__p&&__p();var e=this;d=d||"";this.reset();var f={};c?c.forEach(function(b){a[b]&&(f[b]=a[b])}):f=a;if(Object.keys(f).length===0){this.$3&&b("DOM").remove(this.$3);this.$4.setSelected(!1);return}this.$3=b("DOM").create("div");(g||(g=b("mapObject")))(f,function(a,c){b("DOM").appendContent(e.$3,b("DOM").create("input",{type:"hidden",name:d+c,value:a}))});b("DOM").appendContent(this.$4.getRoot(),this.$3);Object.keys(f).some(function(a){return Array.isArray(f[a])?f[a].length>0:f[a]})&&this.$4.setSelected(!0)};c.reset=function(){this.$3&&b("DOM").remove(this.$3),this.$3=null,this.$4.setSelected(!1)};c.destroy=function(){this.$7()};c.$6=function(a){if(a.getNode("remove"))return;this.$1=!0;b("DOM").hide(b("$")("viewport"));this.$5.show()};c.closeTagger=function(){this.$1=!1,b("DOM").show(b("$")("viewport")),this.$5.hide()};c.$7=function(){this.clearInputs(),this.$2.release(),this.$2=null,this.$5&&this.$5.getRoot()&&b("DOM").remove(this.$5.getRoot())};return a}();b("mixInEventEmitter")(a,{cleared:!0,populated:!0});e.exports=a;e.exports.EVENT_CLEARED="cleared";e.exports.EVENT_POPULATED="populated"}),null);
__d("MPlatformDialogPeopleTagger",["DOM","MFriendsTaggerReact","MPlatformDialogTagger","Stratcom","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();var g="fb:og:people:",h=g+"tagger";a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e){__p&&__p();var f;f=a.call(this)||this;f.$MPlatformDialogPeopleTagger1=new(b("SubscriptionsHandler"))();f.$MPlatformDialogPeopleTagger2=new(b("MFriendsTaggerReact"))(d);f.$MPlatformDialogPeopleTagger3=c;f.init(f.$MPlatformDialogPeopleTagger3,f.$MPlatformDialogPeopleTagger2,h);f.$MPlatformDialogPeopleTagger1.addSubscriptions(f.$MPlatformDialogPeopleTagger2.listen("submit",f.$MPlatformDialogPeopleTagger4.bind(babelHelpers.assertThisInitialized(f))),f.$MPlatformDialogPeopleTagger2.listen("cancel",f.$MPlatformDialogPeopleTagger5.bind(babelHelpers.assertThisInitialized(f))),b("Stratcom").listen("click",h,f.$MPlatformDialogPeopleTagger6.bind(babelHelpers.assertThisInitialized(f))),b("Stratcom").listen("m:page:unload",null,f.$MPlatformDialogPeopleTagger7.bind(babelHelpers.assertThisInitialized(f))));d=e&&e.length?{friend_ids:e}:{};f.createInputs(d,null,g);f.$MPlatformDialogPeopleTagger8=[];return f}var d=c.prototype;d.$MPlatformDialogPeopleTagger4=function(a){!this.$MPlatformDialogPeopleTagger2.hasTokens()?b("Stratcom").invoke(b("MPlatformDialogTagger").EVENT_CLEARED,h):b("Stratcom").invoke(b("MPlatformDialogTagger").EVENT_POPULATED,h,a.tokens),this.$MPlatformDialogPeopleTagger9()};d.$MPlatformDialogPeopleTagger6=function(a){a.getNode("remove")&&(this.$MPlatformDialogPeopleTagger2.removeToken(a.getNode("token")),this.$MPlatformDialogPeopleTagger9())};d.$MPlatformDialogPeopleTagger9=function(){var a={};this.$MPlatformDialogPeopleTagger2.hasTokens()?a={friend_ids:Object.keys(this.$MPlatformDialogPeopleTagger2.getTokens())}:this.$MPlatformDialogPeopleTagger3.setSelected(!1);this.createInputs(a,null,g);this.$MPlatformDialogPeopleTagger8=this.$MPlatformDialogPeopleTagger2.getEntries().slice()};d.$MPlatformDialogPeopleTagger7=function(){this.$MPlatformDialogPeopleTagger1.release(),this.$MPlatformDialogPeopleTagger1=null,this.$MPlatformDialogPeopleTagger2&&this.$MPlatformDialogPeopleTagger2.getRoot()&&b("DOM").remove(this.$MPlatformDialogPeopleTagger2.getRoot())};d.$MPlatformDialogPeopleTagger5=function(){this.$MPlatformDialogPeopleTagger2.setEntries(this.$MPlatformDialogPeopleTagger8.slice())};return c}(b("MPlatformDialogTagger"));a.SIGIL=h;e.exports=a}),null);
__d("XAudienceLimitationDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/audience_limitation/",{})}),null);
__d("MPrivacyComposerMenu",["cx","fbt","CSS","DOM","MComposerLogger","MCompositionConfigStore","MCompositionPrivacyStore","MCompositionUserActions","MLegacyDataStore","MModalDialog","MRequest","MViewport","PrivacyConst","Stratcom","SubscriptionsHandler","XAudienceLimitationDialogController","XPrivacyCustomEditController","$"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,c,d,e){__p&&__p();var f=this;this._root=b("$")(a);this._hiddenInput=b("DOM").find(this._root,"input");this._selectedOption=b("DOM").scry(this._root,"tr","checked")[0];this._stickyURI=c;this._stickyOption=this._selectedOption;this._enableCustomMenu=e;this._dontSaveSticky=!1;this._customLabel=d;this._listeners=new(b("SubscriptionsHandler"))();this._listeners.addSubscriptions(b("MCompositionPrivacyStore").addChangeListener(function(){return f._handlePrivacyUpdate()}));this._listeners.addSubscriptions(b("DOM").listen(this._root,"click","privacy-option",function(a){__p&&__p();a=a.getNode("privacy-option");if(!this._enableCustomMenu||a!=this.getCustomOption()){this._selectOption(a);return}var c=b("Stratcom").listen("m:viewport:orientation-change",null,this._addHeightConstraint.bind(this));this._addHeightConstraint();a=b("MCompositionPrivacyStore").get("PRIVACY_FBID",null);var d=b("MCompositionConfigStore").get("postid",null);a=b("XPrivacyCustomEditController").getURIBuilder().setString("privacy_id",a).setString("post_id",d).getURI();b("MModalDialog").open(a.toString(),function(a){__p&&__p();b("Stratcom").invoke("MPrivacyComposerMenu::custom",null,{visible:!1,instance:this,selector:this._root});b("MViewport").scrollToHeader();c.remove();this._removeHeightConstraint();if(!a.canceled){var d=a.payload.payload.value,e=b("DOM").scry(this._root,"tr","privacy-option"),f=!1;for(var g=0;g<e.length;g++)if(b("MLegacyDataStore").get(e[g]).value==d){this._selectOption(e[g],!0);f=!0;break}if(!f){this._updateCustomSelectedOption(a.payload.payload.description,d);g=this._getCustomSelectedOption();g&&this._selectOption(g,!0)}}}.bind(this));b("Stratcom").invoke("MPrivacyComposerMenu::custom",null,{visible:!0,instance:this,selector:this._root})}.bind(this)));this._listeners.addSubscriptions(b("Stratcom").listen("MStructuredComposer:reset",null,function(a){this._stickyCustomValue&&this._stickyCustomLabel&&this._updateCustomSelectedOption(this._stickyCustomLabel,this._stickyCustomValue)}.bind(this)));this._listeners.addSubscriptions(b("Stratcom").listen("MPrivacyDeferredSelector-loaded",null,function(a){a=a.getData();var c=b("DOM").find(this._root,"table","privacy-table");c.id==a.id&&(this._selectedOption=b("DOM").scry(this._root,"tr","checked")[0]);this._handlePrivacyUpdate()}.bind(this)));this._listeners.addSubscriptions(b("Stratcom").listen("MPrivacyComposerMenu:updatePrivacy",null,function(a){a=a.getData();this._selectOption(a.row,!1,a.log)}.bind(this)));b("MLegacyDataStore").set(this._root,{instance:this})}var c=a.prototype;c.setShowTagExpansion=function(a){var c=this._root;c&&(b("CSS").conditionClass(c,"_1oxi",a),b("CSS").conditionClass(c,"_3kaj",a))};c.getCustomOption=function(){return b("DOM").find(this._root,"tr","privacy-custom-option")};c._getCustomSelectedOption=function(){return b("DOM").scry(this._root,"tr","privacy-custom-selected-option")[0]};c.getSelectedValue=function(){return b("MLegacyDataStore").get(this._selectedOption).value};c._getCustomLabel=function(){var a=this._getCustomSelectedOption();if(!a)return null;a=b("DOM").scry(a,"span","option-desc")[0];return a?a.textContent:null};c._getCustomValue=function(){var a=this._getCustomSelectedOption();return!a?null:b("MLegacyDataStore").get(a).value};c._getIsOptionDisabled=function(a){var c=b("DOM").scry(this._root,"tr","disabled-by-audience-limitation")[0];if(c==null)return!1;c=b("MLegacyDataStore").get(c).value;return c===a};c._selectOption=function(a,c,d){__p&&__p();a=b("MLegacyDataStore").get(a).value;if(this._getIsOptionDisabled(a)){var e=b("XAudienceLimitationDialogController").getURIBuilder().getURI();b("MModalDialog").load(e.toString())}else{d=d!==void 0?d:!0;e=b("MCompositionPrivacyStore").get("NEVER_SAVE_STICKY",!1);var f=this._getCustomLabel(),g=this._getCustomValue(),h={};h.PRIVACY_FBID=a;h.ALREADY_SAVED_STICKY=c;h.NEVER_SAVE_STICKY=e;h.CLOSE_DIALOG=!0;h.CUSTOM_LABEL=f;h.CUSTOM_OPTION=g;b("MCompositionUserActions").privacyUpdate(h)}d&&b("MComposerLogger").log("add_privacy",{privacy_setting:a})};c._updateCustomSelectedOption=function(a,c){var d=b("DOM").find(this._getCustomSelectedOption(),"span","option-desc");b("DOM").setContent(d,a);b("MLegacyDataStore").set(this._getCustomSelectedOption(),{value:c});if(c){b("DOM").show(this._getCustomSelectedOption());d=b("DOM").find(this._getCustomSelectedOption(),"span","plus-label");b("DOM").setContent(d,this._getTagExpansionLabel(c))}};c._getTagExpansionLabel=function(a){try{var c;a=JSON.parse(a);c=(((c=a)!=null?c.allow:c)||[]).indexOf(b("PrivacyConst").CustomPrivacyTokens.FRIENDS)>=0;a=((a=a)!=null?(a=a.settings)!=null?a.no_tag_expansion:a:a)||0;return c&&a===0?h._("(+ Friends of Tagged)"):h._("(+ Tagged)")}catch(a){}return null};c._addHeightConstraint=function(){this._removeHeightConstraint();var a=b("MViewport").getUseableHeight();this._heightConstraint=b("MViewport").addHeightConstraint(a)};c._removeHeightConstraint=function(){this._heightConstraint&&(this._heightConstraint.release(),this._heightConstraint=null)};c._handlePrivacyUpdate=function(){__p&&__p();!this._stickyCustomValue&&this._getCustomSelectedOption()&&(this._stickyCustomValue=this._getCustomValue(),this._stickyCustomLabel=this._getCustomLabel());var a=b("MCompositionPrivacyStore").get("PRIVACY_FBID",null),c=b("MCompositionPrivacyStore").get("ALREADY_SAVED_STICKY",!1),d=b("MCompositionPrivacyStore").get("NEVER_SAVE_STICKY",!1),e=b("MCompositionPrivacyStore").get("CLOSE_DIALOG",!1),f=b("MCompositionPrivacyStore").get("CUSTOM_LABEL"),g=b("MCompositionPrivacyStore").get("CUSTOM_OPTION");c!==void 0&&(this._dontSaveSticky=c);c=b("DOM").scry(this._root,"tr","privacy-option");a===null&&(a=b("MLegacyDataStore").get(this._stickyOption).value);var h=this._hiddenInput&&this._hiddenInput.value;e=e||h!=a;h=b("DOM").scry(document.body,"button","privacy-button")[0];if(a!==null&&e){e=null;for(var i=0;i<c.length;i++)b("MLegacyDataStore").get(c[i]).value==a&&(e=c[i]);this._getCustomSelectedOption()&&g!==null&&f!==null&&this._updateCustomSelectedOption(f,g);e||(e=this._getCustomSelectedOption());if(!e){h&&b("CSS").conditionShow(h,!1);return}this._hiddenInput&&(this._hiddenInput.value=a);this._selectedOption&&b("CSS").conditionClass(this._selectedOption,"checked",!1);this._selectedOption=e;b("CSS").conditionClass(e,"checked",!0);i=!!b("DOM").scry(e,"span","plus-label").length;c=b("DOM").scry(e,"i","small-icon");c.length==0?c=b("DOM").find(e,"i","icon"):c=c[0];f=c.outerHTML;g=b("DOM").find(e,"span","option-desc");a=this._hiddenInput&&this._hiddenInput.value;b("Stratcom").invoke("MPrivacyComposerMenu::change",null,{value:a,showPlus:i,iconHTML:f,optionLabel:g,instance:this});d||(this._stickyOption=this._selectedOption,this._stickyCustomValue=this._getCustomValue(),this._stickyCustomLabel=this._getCustomLabel(),!this._dontSaveSticky&&this._stickyURI&&new(b("MRequest"))(this._stickyURI).setData({privacyx:a}).send())}c=b("MCompositionConfigStore").get("disable_privacy",!1);h&&!c&&b("CSS").conditionShow(h,!0)};a.init=function(b,c,d,e){return new a(b,c,d,e)};a.getInstance=function(a){return b("MLegacyDataStore").get(a).instance};return a}();e.exports=a}),null);
__d("MPrivacyComposerSelector",["cx","Banzai","BanzaiLogger","CSS","DOM","HTML","MComposerLogger","MLegacyDataStore","MPlatformDialogPeopleTagger","MPlatformDialogTagger","MPrivacyComposerMenu","MViewport","Stratcom","Vector","$","ge","isEmpty"],(function(a,b,c,d,e,f,g){__p&&__p();var h;a=function(){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=this;this._root=b("$")(a);this._button=b("DOM").scry(this._root,"button","privacy-button")[0];this._button||(this._button=b("DOM").find(this._root,"div","privacy-button"));this._buttonIcon=b("DOM").find(this._root,"div","privacy-button-icon");this._menu=b("DOM").find(this._root,"div","privacy-composer-menu");this._config=c;b("DOM").listen(this._root,"click","privacy-button",function(a){this.isOpen()?(this.hideMenu(),b("MComposerLogger").log("cancel_privacy")):(this.showMenu(),b("BanzaiLogger").log("MPrivacySelectorConsistencyLoggerConfig",{event:"render",logging_source:"mobile_composer_timeline"}),b("MComposerLogger").log("intent_privacy")),document&&document.activeElement&&document.activeElement.blur()}.bind(this));b("Stratcom").listen("MPrivacyComposerMenu::change",null,function(a){__p&&__p();a=a.getData();if(a.instance!=b("MPrivacyComposerMenu").getInstance(this._menu))return;!Object.prototype.hasOwnProperty.call(a,"optionLabel")||!Object.prototype.hasOwnProperty.call(a,"showPlus")||!Object.prototype.hasOwnProperty.call(a,"iconHTML");if(this._config.updatebuttontext){var c=b("DOM").find(this._button,"span","button-text");b("DOM").setContent(c,a.optionLabel.cloneNode(!0))}c=b("DOM").find(this._button,"span","plus-label");a.showPlus?b("DOM").show(c):b("DOM").hide(c);a.iconHTML&&b("DOM").setContent(this._buttonIcon,new(b("HTML"))(a.iconHTML));this.hideMenu()}.bind(this));var e=b("Stratcom").listen(b("MPlatformDialogTagger").EVENT_POPULATED,b("MPlatformDialogPeopleTagger").SIGIL,function(a){return d._updateTagExpansion(a)}),f=b("Stratcom").listen(b("MPlatformDialogTagger").EVENT_CLEARED,b("MPlatformDialogPeopleTagger").SIGIL,function(a){return d._updateTagExpansion(a)});b("Stratcom").listen("m:page:unload",null,function(){e.remove(),f.remove(),b("Stratcom").removeCurrentListener()});b("MLegacyDataStore").set(this._root,{instance:this})}var c=a.prototype;c._updateTagExpansion=function(a){a=a&&!(h||(h=b("isEmpty")))(a.getData());this.setShowTagExpansion(!!a)};c.setShowTagExpansion=function(a){this._root&&b("CSS").conditionClass(this._root,"_27-k",a);var c=b("MPrivacyComposerMenu").getInstance(this._menu);c&&c.setShowTagExpansion(a)};c.getSelectedValue=function(){var c=b("MPrivacyComposerMenu").getInstance(this._menu);if(c)return c.getSelectedValue();else{c=b("ge")(a.getSavedCustomInputName(),this._root);return c&&c.value}};c.showMenu=function(){b("DOM").show(this._menu),b("Stratcom").invoke("MPrivacyComposerMenu::show",null,{selector:this._root}),this._heightConstraint=b("MViewport").addMinHeightConstraint(b("Vector").getDim(this._menu).y+b("Vector").getPos(this._menu).y),b("Banzai").post("privacy_selector_interaction",{event:"open_selector"})};c.hideMenu=function(){this.isOpen()&&(b("DOM").hide(this._menu),b("Stratcom").invoke("MPrivacyComposerMenu::hide",null,{selector:this._root}),this._heightConstraint&&this._heightConstraint.release(),b("Banzai").post("privacy_selector_interaction",{event:"close_selector"}))};c.isOpen=function(){var a=this._menu&&this._menu.style;return a!=null&&a.display!="none"};a.init=function(b,c){return new a(b,c)};a.getInstance=function(a){return b("MLegacyDataStore").get(a).instance};a.getSavedCustomInputName=function(){return"m_composer_privacy_selector_input"};return a}();e.exports=a}),null);